<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="toc.html">Table of contents</a>
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc-header" class="toc-header">Contents:</div>
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc">
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Extraction.Erasure</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Utils.html#"><span class="id" title="library">Utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.ExAst.html#"><span class="id" title="library">ExAst</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">EArities</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">EAstUtils</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">ErasureFunction</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICArities</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICAstUtils</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICCanonicity</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICConfluence</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICContextConversion</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICContexts</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICConversion</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICInductiveInversion</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICInversion</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICLiftSubst</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICNormal</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICSN</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICSR</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICSafeLemmata</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICSubstitution</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICTyping</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICValidity</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.SafeChecker</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICSafeReduce</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.SafeChecker</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">PCUICSafeRetyping</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Kernames</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">config</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">PCUICEnvTyping</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">PCUICErrors</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">VectorDef.VectorNotations</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Transparent</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="P"><span class="id" title="module">P</span></a> := <span class="id" title="module">PCUICAst</span>.<br/>
<span class="id" title="keyword">Module</span> <a name="Ex"><span class="id" title="module">Ex</span></a> := <a class="idref" href="ConCert.Extraction.ExAst.html#"><span class="id" title="module">ExAst</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">PCUICAst</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="FixSigmaExt"><span class="id" title="section">FixSigmaExt</span></a>.<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">extraction_checker_flags</span>.<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">Σ</span> : <span class="id" title="definition">global_env_ext</span>).<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">wfextΣ</span> : <span class="id" title="notation">∥</span><span class="id" title="class">wf_ext</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">∥</span>).<br/>
<span class="id" title="keyword">Let</span> <a name="5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> : <span class="id" title="notation">∥</span><span class="id" title="class">wf</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">∥</span> := <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">now</span> <span class="id" title="var">sq</span>).<br/>

<br/>
<span class="id" title="keyword">Opaque</span> <span class="id" title="instance">ErasureFunction.wf_reduction</span>.<br/>
<span class="id" title="keyword">Opaque</span> <span class="id" title="definition">reduce_term</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="term_rel"><span class="id" title="abbreviation">term_rel</span></a> := (<span class="id" title="definition">ErasureFunction.term_rel</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Instance</span> <a name="WellFounded_term_rel"><span class="id" title="instance">WellFounded_term_rel</span></a> : <span class="id" title="class">WellFounded</span> <a class="idref" href="ConCert.Extraction.Erasure.html#term_rel"><span class="id" title="abbreviation">term_rel</span></a> :=<br/>
&nbsp;&nbsp;(<span class="id" title="instance">ErasureFunction.wf_reduction</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sq_red_transitivity"><span class="id" title="lemma">sq_red_transitivity</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">A</span>} <span class="id" title="var">B</span> {<span class="id" title="var">C</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a><span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">∥</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">transitivity</span> <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="isArity_red"><span class="id" title="lemma">isArity_red</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">isArity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">isArity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">arity_u</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">r</span> <span class="id" title="keyword">using</span> <span class="id" title="definition">red_rect'</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">isArity_red1</span>; <span class="id" title="var">eassumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="isType_red_sq"><span class="id" title="lemma">isType_red_sq</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a><span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t'"><span class="id" title="variable">t'</span></a><span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t'"><span class="id" title="variable">t'</span></a><span class="id" title="notation">∥</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [(<span class="id" title="var">s</span> &amp; <span class="id" title="var">typ</span>)] [<span class="id" title="var">r</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">subject_reduction</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">isType_red_sq</span> : <span class="id" title="var">erase</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="isType_prod_dom"><span class="id" title="lemma">isType_prod_dom</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>)<span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a><span class="id" title="notation">∥</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [(<span class="id" title="var">s</span> &amp; <span class="id" title="var">typ</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_Prod</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s'</span> &amp; ? &amp; ? &amp; ? &amp; ?); [|<span class="id" title="var">now</span> <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">isType_prod_dom</span> : <span class="id" title="var">erase</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="isType_prod_cod"><span class="id" title="lemma">isType_prod_cod</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>)<span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a>) <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a><span class="id" title="notation">∥</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [(<span class="id" title="var">s</span> &amp; <span class="id" title="var">typ</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_Prod</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s'</span> &amp; ? &amp; ? &amp; ? &amp; ?); [|<span class="id" title="var">now</span> <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">isType_prod_cod</span> : <span class="id" title="var">erase</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="Is_conv_to_Arity_red"><span class="id" title="lemma">Is_conv_to_Arity_red</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span> <span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Is_conv_to_Arity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T''</span> (<span class="id" title="var">redT''</span> &amp; <span class="id" title="var">is_arity</span>)] <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">red_confluence</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="tactic">red</span> <span class="id" title="var">redT''</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span> &amp; <span class="id" title="var">reda'</span> &amp; <span class="id" title="var">reda''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">is_arity</span> <span class="id" title="var">reda''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#isArity_red"><span class="id" title="lemma">isArity_red</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">Is_conv_to_Arity_red</span> : <span class="id" title="var">erase</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">reduce_term_sound</span> <span class="id" title="var">sq</span> <span class="id" title="var">existT</span> <span class="id" title="var">pair</span> : <span class="id" title="var">erase</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_prod_or_sort"><span class="id" title="definition">is_prod_or_sort</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tSort</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="not_prod_or_sort_hnf"><span class="id" title="lemma">not_prod_or_sort_hnf</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="keyword">wf</span>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#is_prod_or_sort"><span class="id" title="definition">is_prod_or_sort</span></a> (<span class="id" title="definition">hnf</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#wf"><span class="id" title="variable">wf</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nar</span> <span class="id" title="var">car</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nar</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">reduce_term_sound</span> <span class="id" title="definition">RedFlags.default</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="keyword">wf</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">reduce_term_complete</span> <span class="id" title="definition">RedFlags.default</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="keyword">wf</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">wh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Is_conv_to_Arity_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">car</span> <span class="id" title="keyword">as</span> [(?&amp;?&amp;?&amp;[<span class="id" title="var">r'</span>])|(?&amp;[<span class="id" title="var">r'</span>])]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_confluence</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span> <span class="id" title="keyword">as</span> (?&amp;<span class="id" title="var">r1</span>&amp;<span class="id" title="var">r2</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">invert_red_prod</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;(-&gt;&amp;?)&amp;?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wh</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wh</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">whnf_red_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wh</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">wh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nar</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_confluence</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r'</span> <span class="id" title="keyword">as</span> (?&amp;<span class="id" title="var">r1</span>&amp;<span class="id" title="var">r2</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">invert_red_sort</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r2</span> <span class="id" title="keyword">as</span> -&gt;; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wh</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wh</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">whnf_red_inv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wh</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">wh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nar</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a> : <span class="id" title="definition">context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="sub_prod_dom"><span class="id" title="constructor">sub_prod_dom</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a name="sub_prod_cod"><span class="id" title="constructor">sub_prod_cod</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a name="sub_app_arg"><span class="id" title="constructor">sub_app_arg</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">arg</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg1</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arg"><span class="id" title="variable">arg</span></a> <span class="id" title="notation">(</span><span class="id" title="definition">decompose_app</span> (<span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.Erasure.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arg1"><span class="id" title="variable">arg1</span></a>)<span class="id" title="notation">).2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arg"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.Erasure.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arg1"><span class="id" title="variable">arg1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="var">Derive</span> <span class="id" title="var">Signature</span> <span class="id" title="keyword">for</span> <a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="In_app_inv"><span class="id" title="lemma">In_app_inv</span></a> {<span class="id" title="var">X</span>} (<span class="id" title="var">x</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">xs</span> <span class="id" title="var">ys</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ys"><span class="id" title="variable">ys</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ys"><span class="id" title="variable">ys</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">isin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">isin</span> <span class="id" title="keyword">as</span> [-&gt;|]; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHxs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_founded_term_sub_ctx"><span class="id" title="lemma">well_founded_term_sub_ctx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">Γ</span> &amp; <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span> |- *; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> (<span class="id" title="var">Γs</span> &amp; <span class="id" title="var">ts</span>) <span class="id" title="var">rel</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">rel</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">rel</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">depelim</span> <span class="id" title="var">rel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">mkApps_elim</span> <span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decompose_app_rec_mkApps</span>, <span class="id" title="lemma">atom_decompose_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#In_app_inv"><span class="id" title="lemma">In_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [|[|]]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; [|<span class="id" title="var">easy</span>|<span class="id" title="var">easy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHt1</span> <span class="id" title="var">Γ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#firstn"><span class="id" title="definition">firstn</span></a> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">List.rev_ind</span></a>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">mkApps_nested</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decompose_app_rec_mkApps</span>, <span class="id" title="lemma">atom_decompose_app</span> <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="erase_rel"><span class="id" title="definition">erase_rel</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">Relation_Definitions.relation</span></a> (<span class="id" title="notation">∑</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="inductive">welltyped</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> '<span class="id" title="notation">(</span><span class="id" title="var">Γs</span><span class="id" title="notation">;</span> <span class="id" title="var">ts</span><span class="id" title="notation">;</span> <span class="id" title="var">wfs</span><span class="id" title="notation">)</span> '<span class="id" title="notation">(</span><span class="id" title="var">Γl</span><span class="id" title="notation">;</span> <span class="id" title="var">tl</span><span class="id" title="notation">;</span> <span class="id" title="var">wfl</span><span class="id" title="notation">)</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∥</span><span class="id" title="notation">∑</span><span class="id" title="var">m</span><span class="id" title="notation">,</span> <span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#97968c7dae695116a97b0e13deb94b87"><span class="id" title="variable">Γl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tl"><span class="id" title="variable">tl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#3c432e860f49c8796d4c4cb0d0731c76"><span class="id" title="variable">Γs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ts"><span class="id" title="variable">ts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#97968c7dae695116a97b0e13deb94b87"><span class="id" title="variable">Γl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">∥</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="cored_prod_l"><span class="id" title="lemma">cored_prod_l</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span> <span class="id" title="var">B</span> :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">cored</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A'"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">cored</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>) (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A'"><span class="id" title="variable">A'</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">cor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cored_red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cor</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">prod_red_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_prod_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="cored_prod_r"><span class="id" title="lemma">cored_prod_r</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">B'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="inductive">cored</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a>) <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B'"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">cored</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>) (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B'"><span class="id" title="variable">B'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">cor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cored_red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cor</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="constructor">prod_red_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_prod_r</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="well_founded_erase_rel"><span class="id" title="lemma">well_founded_erase_rel</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_rel"><span class="id" title="definition">erase_rel</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">Γl</span> &amp; <span class="id" title="var">l</span> &amp; <span class="id" title="var">wfl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">wfΣu</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="axiom">normalisation</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">Γl</span> <span class="id" title="var">l</span> <span class="id" title="var">wfl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> <span class="id" title="var">_</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Γl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">wfl</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">Γl</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">p</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">p</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Γl</span> <span class="id" title="var">l</span> <span class="id" title="var">Heqp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfl</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#well_founded_term_sub_ctx"><span class="id" title="lemma">well_founded_term_sub_ctx</span></a> <span class="id" title="var">p</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">IH'</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>, <span class="id" title="var">wfl</span>, <span class="id" title="var">IH</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">Γs</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">wfs</span>) [(<span class="id" title="var">m</span> &amp; <span class="id" title="var">mred</span> &amp; <span class="id" title="var">msub</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">msub</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">msub</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Relation_Properties.clos_rt_rtn1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mred</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">mred</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IH'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">s</span> <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">cor</span> <span class="id" title="var">wfly</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="var">IH</span> (<span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">y</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: <span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_welltyped</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cor</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_prod_l</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#cored_prod_l"><span class="id" title="lemma">cored_prod_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Relation_Properties.clos_rtn1_rt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="var">IH</span> (<span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">s</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: <span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_welltyped</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_neq_cored</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">ErasureFunction.Acc_no_loop</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<span class="id" title="axiom">normalisation</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Relation_Properties.clos_rt_rtn1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mred</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">mred</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IH'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><span class="id" title="notation">.1</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">cor</span> <span class="id" title="var">wfly</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: { <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_welltyped</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cor</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cored</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_prod</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#cored_prod_r"><span class="id" title="lemma">cored_prod_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Relation_Properties.clos_rtn1_rt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4: { <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_welltyped</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_neq_cored</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">ErasureFunction.Acc_no_loop</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<span class="id" title="axiom">normalisation</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">Relation_Properties.clos_rt_rtn1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">mred</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">mred</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="var">IH'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">cor</span> <span class="id" title="var">wfly</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">mkApps_elim</span> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decompose_app_rec_mkApps</span>, <span class="id" title="lemma">atom_decompose_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="constructor">tApp</span> ?<span class="id" title="var">hd</span> ?<span class="id" title="var">arg</span>) <span class="id" title="keyword">with</span> (<span class="id" title="definition">mkApps</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#hd"><span class="id" title="definition">hd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">arg</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">mkApps_nested</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">args</span> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#firstn"><span class="id" title="definition">firstn</span></a> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">arg1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In_split"><span class="id" title="abbreviation">In_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args_pref</span> &amp; <span class="id" title="var">args_suf</span> &amp; -&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="var">IH</span> (<span class="id" title="definition">mkApps</span> <span class="id" title="var">f</span> (<span class="id" title="var">args_pref</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">args_suf</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: { <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args_suf</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">rev_ind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">mkApps_nested</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decompose_app_rec_mkApps</span>, <span class="id" title="lemma">atom_decompose_app</span> <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">app_tip_assoc</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">mkApps_nested</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decompose_app_rec_mkApps</span>, <span class="id" title="lemma">atom_decompose_app</span> <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#in_or_app"><span class="id" title="lemma">in_or_app</span></a>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">left</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_welltyped</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cor</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_mkApps</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">All2_app</span>; [<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All2_refl</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All2_refl</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">cor</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cored_red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cor</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="lemma">PCUICSubstitution.red1_mkApps_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">OnOne2_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_mkApps</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">All2_app</span>; [<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All2_refl</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">All2_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">PCUICSubstitution.red1_mkApps_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">OnOne2_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Relation_Properties.clos_rtn1_rt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="var">IH</span> (<span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3: { <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: { <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">red_welltyped</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_neq_cored</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">etransitivity</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cored_red_trans</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">ErasureFunction.Acc_no_loop</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<span class="id" title="axiom">normalisation</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="WellFounded_erase_rel"><span class="id" title="instance">WellFounded_erase_rel</span></a> : <span class="id" title="class">WellFounded</span> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_rel"><span class="id" title="definition">erase_rel</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Wf.html#Acc_intro_generator"><span class="id" title="definition">Wf.Acc_intro_generator</span></a> 1000 <a class="idref" href="ConCert.Extraction.Erasure.html#well_founded_erase_rel"><span class="id" title="lemma">well_founded_erase_rel</span></a>.<br/>
<span class="id" title="keyword">Opaque</span> <a class="idref" href="ConCert.Extraction.Erasure.html#WellFounded_erase_rel"><span class="id" title="instance">WellFounded_erase_rel</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ConCert.Extraction.Erasure.html#term_sub_ctx"><span class="id" title="inductive">term_sub_ctx</span></a> : <span class="id" title="var">erase</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="fot_view"><span class="id" title="inductive">fot_view</span></a> : <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="fot_view_prod"><span class="id" title="constructor">fot_view_prod</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view"><span class="id" title="inductive">fot_view</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>)<br/>
| <a name="fot_view_sort"><span class="id" title="constructor">fot_view_sort</span></a> <span class="id" title="var">univ</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view"><span class="id" title="inductive">fot_view</span></a> (<span class="id" title="constructor">tSort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a>)<br/>
| <a name="fot_view_other"><span class="id" title="constructor">fot_view_other</span></a> <span class="id" title="var">t</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#is_prod_or_sort"><span class="id" title="definition">is_prod_or_sort</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view"><span class="id" title="inductive">fot_view</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="fot_viewc"><span class="id" title="definition">fot_viewc</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view"><span class="id" title="inductive">fot_view</span></a> <span class="id" title="var">t</span> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#fot_viewc"><span class="id" title="definition">fot_viewc</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>) := <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view_prod"><span class="id" title="constructor">fot_view_prod</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#fot_viewc"><span class="id" title="definition">fot_viewc</span></a> (<span class="id" title="constructor">tSort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a>) := <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view_sort"><span class="id" title="constructor">fot_view_sort</span></a> <span class="id" title="var">univ</span>;<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#fot_viewc"><span class="id" title="definition">fot_viewc</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view_other"><span class="id" title="constructor">fot_view_other</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="tywt"><span class="id" title="lemma">tywt</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} (<span class="id" title="var">isT</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">∥</span>) : <span class="id" title="inductive">welltyped</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">isT</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">isType_welltyped</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;of&nbsp;normalized&nbsp;arities&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="arity_ass"><span class="id" title="definition">arity_ass</span></a> := <span class="id" title="definition">aname</span> <span class="id" title="notation">*</span> <span class="id" title="inductive">term</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arity_ass"><span class="id" title="definition">arity_ass</span></a>) (<span class="id" title="var">s</span> : <span class="id" title="definition">Universe.t</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="constructor">tSort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">na</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt; <span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#s"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="isArity_mkNormalArity"><span class="id" title="lemma">isArity_mkNormalArity</span></a> <span class="id" title="var">l</span> <span class="id" title="var">s</span> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">isArity</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#s"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|(<span class="id" title="var">na</span> &amp; <span class="id" title="var">A</span>) <span class="id" title="var">l</span> <span class="id" title="var">IH</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a name="conv_arity"><span class="id" title="record">conv_arity</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} : <span class="id" title="keyword">Type</span> := <a name="build_conv_arity"><span class="id" title="constructor">build_conv_arity</span></a> {<br/>
&nbsp;&nbsp;<a name="conv_ar_context"><span class="id" title="projection">conv_ar_context</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arity_ass"><span class="id" title="definition">arity_ass</span></a>;<br/>
&nbsp;&nbsp;<a name="conv_ar_univ"><span class="id" title="projection">conv_ar_univ</span></a> : <span class="id" title="definition">Universe.t</span>;<br/>
&nbsp;&nbsp;<a name="conv_ar_red"><span class="id" title="projection">conv_ar_red</span></a> : <span class="id" title="notation">∥</span><span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#conv_ar_context"><span class="id" title="method">conv_ar_context</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#conv_ar_univ"><span class="id" title="method">conv_ar_univ</span></a>)<span class="id" title="notation">∥</span><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity"><span class="id" title="record">conv_arity</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="conv_arity_or_not"><span class="id" title="definition">conv_arity_or_not</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity"><span class="id" title="record">conv_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><span class="id" title="notation">∥</span><a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity"><span class="id" title="record">conv_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">∥</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Is_conv_to_Sort"><span class="id" title="definition">Is_conv_to_Sort</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">T</span> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">univ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="notation">∥</span><span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> (<span class="id" title="constructor">tSort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a>)<span class="id" title="notation">∥</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_sort"><span class="id" title="definition">is_sort</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} (<span class="id" title="var">c</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity_or_not"><span class="id" title="definition">conv_arity_or_not</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#Is_conv_to_Sort"><span class="id" title="definition">Is_conv_to_Sort</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span>|<span class="id" title="var">not_conv_ar</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [[|(<span class="id" title="var">na</span> &amp; <span class="id" title="var">A</span>) <span class="id" title="var">ctx</span>] <span class="id" title="var">univ</span> <span class="id" title="var">r</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="red_it_mkProd_or_LetIn_smash_context"><span class="id" title="lemma">red_it_mkProd_or_LetIn_smash_context</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">t</span> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">red</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">it_mkProd_or_LetIn</span> <a class="idref" href="ConCert.Extraction.Erasure.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">it_mkProd_or_LetIn</span> (<span class="id" title="definition">smash_context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a>) (<span class="id" title="definition">expand_lets</span> <a class="idref" href="ConCert.Extraction.Erasure.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span>, <span class="id" title="var">t</span> |- * <span class="id" title="keyword">using</span> <span class="id" title="lemma">ctx_length_rev_ind</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">expand_lets_nil</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="var">Γ0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><span class="id" title="notation">,,,</span> <span class="id" title="var">Γ0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">smash_context_app_expand</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="definition">app_context</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">expand_lets_vdef</span>, <span class="id" title="lemma">it_mkProd_or_LetIn_app</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lift0_context</span>, <span class="id" title="lemma">lift0_id</span>, <span class="id" title="lemma">subst_empty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subst_context_smash_context</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red1_red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">red_zeta</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">subst1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subst_it_mkProd_or_LetIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subst_context_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <span class="id" title="definition">app_context</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">expand_lets_vass</span>, !<span class="id" title="lemma">it_mkProd_or_LetIn_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_prod_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subst_context_lift_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="conv_arity_Is_conv_to_Arity"><span class="id" title="lemma">conv_arity_Is_conv_to_Arity</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity"><span class="id" title="record">conv_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">asses</span> <span class="id" title="var">univ</span> <span class="id" title="var">r</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">eassumption</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#isArity_mkNormalArity"><span class="id" title="lemma">isArity_mkNormalArity</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="Is_conv_to_Arity_conv_arity"><span class="id" title="lemma">Is_conv_to_Arity_conv_arity</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity"><span class="id" title="record">conv_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">∥</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">t</span> &amp; [<span class="id" title="var">r</span>] &amp; <span class="id" title="var">isar</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">destArity</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">ctx</span> &amp; <span class="id" title="var">univ</span>)|] <span class="id" title="var">eqn</span>:<span class="id" title="var">dar</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> (<span class="id" title="var">ctx'</span> := <span class="id" title="definition">rev_map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">d</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="projection">decl_name</span> <a class="idref" href="ConCert.Extraction.Erasure.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="projection">decl_type</span> <a class="idref" href="ConCert.Extraction.Erasure.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<span class="id" title="definition">smash_context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ctx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#build_conv_arity"><span class="id" title="constructor">build_conv_arity</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ctx'</span> <span class="id" title="var">univ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">t</span>; [<span class="id" title="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">PCUICArities.destArity_spec_Some</span> <span class="id" title="tactic">in</span> <span class="id" title="var">dar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">dar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <span class="id" title="var">ctx'</span> <span class="id" title="var">univ</span>) <span class="id" title="keyword">with</span> (<span class="id" title="definition">it_mkProd_or_LetIn</span> (<span class="id" title="definition">smash_context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ctx</span>) (<span class="id" title="constructor">tSort</span> <span class="id" title="var">univ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#red_it_mkProd_or_LetIn_smash_context"><span class="id" title="lemma">red_it_mkProd_or_LetIn_smash_context</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">ctx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<span class="id" title="lemma">smash_context_assumption_context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ctx</span> <span class="id" title="constructor">assumption_context_nil</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="definition">smash_context</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ctx</span>) <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#rev_ind"><span class="id" title="lemma">List.rev_ind</span></a>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">it_mkProd_or_LetIn_app</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">rev_map_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">assumption_context_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">ass_x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">ass_x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">isar</span> <span class="id" title="var">dar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">dar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> : <span class="id" title="definition">context</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_arity"><span class="id" title="definition">is_arity</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} (<span class="id" title="var">c</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity_or_not"><span class="id" title="definition">conv_arity_or_not</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span>; [<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity_Is_conv_to_Arity"><span class="id" title="lemma">conv_arity_Is_conv_to_Arity</span></a> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">intros</span> <span class="id" title="var">conv</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#Is_conv_to_Arity_conv_arity"><span class="id" title="lemma">Is_conv_to_Arity_conv_arity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">conv</span>; <span class="id" title="tactic">tauto</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;type_flag&nbsp;of&nbsp;a&nbsp;term&nbsp;indexed&nbsp;by&nbsp;the&nbsp;term's&nbsp;type.&nbsp;For&nbsp;example,&nbsp;for<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;eq_refl&nbsp;:&nbsp;5&nbsp;=&nbsp;5&nbsp;:&nbsp;Prop<br/>
&nbsp;&nbsp;&nbsp;we&nbsp;would&nbsp;pass&nbsp;T&nbsp;to&nbsp;flag_of_type&nbsp;below,&nbsp;and&nbsp;it&nbsp;would&nbsp;give<br/>
&nbsp;&nbsp;&nbsp;is_logical&nbsp;=&nbsp;true,&nbsp;conv_ar&nbsp;=&nbsp;right&nbsp;_.&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;for<br/>
&nbsp;&nbsp;&nbsp;(fun&nbsp;(X&nbsp;:&nbsp;Type)&nbsp;=&gt;&nbsp;X)&nbsp;:&nbsp;Type&nbsp;-&gt;&nbsp;Type<br/>
&nbsp;&nbsp;&nbsp;we&nbsp;would&nbsp;pass&nbsp;Type&nbsp;-&gt;&nbsp;Type&nbsp;and&nbsp;get&nbsp;is_logical&nbsp;=&nbsp;false,&nbsp;conv_ar&nbsp;=&nbsp;left&nbsp;_.<br/>
*)</span><br/>
<span class="id" title="keyword">Record</span> <a name="type_flag"><span class="id" title="record">type_flag</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">T</span>} :=<br/>
&nbsp;&nbsp;<a name="build_flag"><span class="id" title="constructor">build_flag</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Type&nbsp;is&nbsp;proposition&nbsp;when&nbsp;fully&nbsp;applied,&nbsp;i.e.&nbsp;either<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(T&nbsp;:&nbsp;Prop,&nbsp;or&nbsp;T&nbsp;a0&nbsp;..&nbsp;an&nbsp;:&nbsp;Prop).&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;arity,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;logical&nbsp;arity&nbsp;(i.e.&nbsp;into&nbsp;Prop).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="is_logical"><span class="id" title="projection">is_logical</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Arity&nbsp;that&nbsp;this&nbsp;type&nbsp;is&nbsp;convertible&nbsp;to&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="conv_ar"><span class="id" title="projection">conv_ar</span></a> : <a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity_or_not"><span class="id" title="definition">conv_arity_or_not</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="ConCert.Extraction.Erasure.html#type_flag"><span class="id" title="record">type_flag</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>(<span class="id" title="var">noeqns</span>) <a name="flag_of_type"><span class="id" title="definition">flag_of_type</span></a> (<span class="id" title="var">Γ</span> : <span class="id" title="definition">context</span>) (<span class="id" title="var">T</span> : <span class="id" title="inductive">term</span>) (<span class="id" title="var">isT</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="ConCert.Extraction.Erasure.html#type_flag"><span class="id" title="record">type_flag</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">T</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<span class="id" title="notation">(</span><span class="id" title="var">Γ</span><span class="id" title="notation">;</span><span class="id" title="var">T</span><span class="id" title="notation">;</span> <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span><span class="id" title="notation">))</span> : (<span class="id" title="notation">∑</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="inductive">welltyped</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="ConCert.Extraction.Erasure.html#erase_rel"><span class="id" title="definition">erase_rel</span></a> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#isT"><span class="id" title="variable">isT</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">hnf</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">T</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span>)) :=<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#is_hnf"><span class="id" title="variable">is_hnf</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#fot_viewc"><span class="id" title="definition">fot_viewc</span></a> <span class="id" title="var">T</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view_prod"><span class="id" title="constructor">fot_view_prod</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) <span class="id" title="var">B</span> <span class="id" title="var">_</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#flag_cod"><span class="id" title="variable">flag_cod</span></a> := {| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">flag_cod</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">match</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">flag_cod</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">|</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">car</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">{|</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar_context</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">na</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">A</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar_context</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">car</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar_univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar_univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">car</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">|}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">|</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">notar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">_</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">end</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view_sort"><span class="id" title="constructor">fot_view_sort</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a> := {| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">Universe.is_prop</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">univ</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">{|</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar_context</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">[];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar_univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">univ</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">|}</span></a> |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#fot_view_other"><span class="id" title="constructor">fot_view_other</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#discr"><span class="id" title="variable">discr</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">infer</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ</span> <span class="id" title="var">T</span> <span class="id" title="var">_</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#princK"><span class="id" title="variable">princK</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">reduce_to_sort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">K</span> <span class="id" title="var">_</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">(</span></a><span class="id" title="constructor">Checked</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#red_univ"><span class="id" title="variable">red_univ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">))</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#eq"><span class="id" title="variable">eq</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">Universe.is_prop</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">univ</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">_</span></a> |};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">(</span></a><span class="id" title="constructor">TypeError</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#eq"><span class="id" title="variable">eq</span></a> := <span class="id" title="notation">!</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">reduce_term_sound</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">hnf</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span>: ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">reduce_term</span> ?<span class="id" title="var">flags</span> ?<span class="id" title="var">Σ</span> ?<span class="id" title="var">wfΣ</span> ?<span class="id" title="var">Γ</span> ?<span class="id" title="var">t</span> ?<span class="id" title="var">wft</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">r</span> := <span class="id" title="tactic">fresh</span> "r" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">reduce_term_sound</span> <span class="id" title="var">flags</span> <span class="id" title="var">Σ</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">wft</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">car</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ctx</span> <span class="id" title="var">univ</span> [<span class="id" title="var">r'</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">red_prod_r</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span> <span class="id" title="var">notar</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#Is_conv_to_Arity_conv_arity"><span class="id" title="lemma">Is_conv_to_Arity_conv_arity</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">car</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity_Is_conv_to_Arity"><span class="id" title="lemma">conv_arity_Is_conv_to_Arity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">car</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">prod_conv</span>: <span class="id" title="definition">Is_conv_to_Arity</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">Γ</span> (<span class="id" title="constructor">tProd</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#Is_conv_to_Arity_red"><span class="id" title="lemma">Is_conv_to_Arity_red</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">T</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">is_hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">hnf_sound</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">prod_conv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tm</span> [[<span class="id" title="var">redtm</span>] <span class="id" title="var">ar</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">invert_red_prod</span> <span class="id" title="tactic">in</span> <span class="id" title="var">redtm</span>; [|<span class="id" title="var">easy</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">redtm</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">A'</span> &amp; <span class="id" title="var">B'</span> &amp; (-&gt; &amp; <span class="id" title="var">redAA'</span>) &amp; <span class="id" title="var">redBB'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">B'</span>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="ConCert.Extraction.Erasure.html#0092e1d1eb2c83b5c9c9e76adf01b47b"><span class="id" title="variable">wfextΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> [].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">princK</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">typK</span> &amp; <span class="id" title="var">princK</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">isT</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">isT</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="definition">isType_welltyped</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity_term</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#not_prod_or_sort_hnf"><span class="id" title="lemma">not_prod_or_sort_hnf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">discr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">car</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#conv_arity_Is_conv_to_Arity"><span class="id" title="lemma">conv_arity_Is_conv_to_Arity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">car</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">PCUICSafeReduce.reduce_to_sort_complete</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> <span class="id" title="var">eq</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Extraction.Erasure.html#not_prod_or_sort_hnf"><span class="id" title="lemma">not_prod_or_sort_hnf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">discr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">isT</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">u</span>&amp;<span class="id" title="var">typ</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">princK</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">typK</span> &amp; <span class="id" title="var">princK</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">princK</span> <span class="id" title="var">_</span> <span class="id" title="var">typ</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">invert_cumul_sort_r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">princK</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="erase_type_discr"><span class="id" title="definition">erase_type_discr</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="keyword">Prop</span> := {<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tRel</span> <span class="id" title="constructor">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tSort</span> <span class="id" title="constructor">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProd</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tInd</span> <span class="id" title="constructor">_</span> <span class="id" title="constructor">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>;<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> : <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="et_view_rel"><span class="id" title="constructor">et_view_rel</span></a> <span class="id" title="var">i</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> (<span class="id" title="constructor">tRel</span> <a class="idref" href="ConCert.Extraction.Erasure.html#i"><span class="id" title="variable">i</span></a>)<br/>
| <a name="et_view_sort"><span class="id" title="constructor">et_view_sort</span></a> <span class="id" title="var">u</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> (<span class="id" title="constructor">tSort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a>)<br/>
| <a name="et_view_prod"><span class="id" title="constructor">et_view_prod</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> (<span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>)<br/>
| <a name="et_view_app"><span class="id" title="constructor">et_view_app</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> (<span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.Erasure.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arg"><span class="id" title="variable">arg</span></a>)<br/>
| <a name="et_view_const"><span class="id" title="constructor">et_view_const</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">u</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> (<span class="id" title="constructor">tConst</span> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a>)<br/>
| <a name="et_view_ind"><span class="id" title="constructor">et_view_ind</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">u</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> (<span class="id" title="constructor">tInd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a>)<br/>
| <a name="et_view_other"><span class="id" title="constructor">et_view_other</span></a> <span class="id" title="var">t</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_discr"><span class="id" title="definition">erase_type_discr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="erase_type_viewc"><span class="id" title="definition">erase_type_viewc</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_view"><span class="id" title="inductive">erase_type_view</span></a> <span class="id" title="var">t</span> := {<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tRel</span> <a class="idref" href="ConCert.Extraction.Erasure.html#i"><span class="id" title="variable">i</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_rel"><span class="id" title="constructor">et_view_rel</span></a> <span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tSort</span> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_sort"><span class="id" title="constructor">et_view_sort</span></a> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_prod"><span class="id" title="constructor">et_view_prod</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.Erasure.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arg"><span class="id" title="variable">arg</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_app"><span class="id" title="constructor">et_view_app</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_const"><span class="id" title="constructor">et_view_const</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tInd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#u"><span class="id" title="variable">u</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_ind"><span class="id" title="constructor">et_view_ind</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_other"><span class="id" title="constructor">et_view_other</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> :=<br/>
<span class="comment">(*&nbsp;tRel&nbsp;refers&nbsp;to&nbsp;type&nbsp;variable&nbsp;n&nbsp;in&nbsp;the&nbsp;list&nbsp;of&nbsp;type&nbsp;vars&nbsp;*)</span><br/>
| <a name="RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
<span class="comment">(*&nbsp;tRel&nbsp;refers&nbsp;to&nbsp;an&nbsp;inductive&nbsp;type&nbsp;(used&nbsp;in&nbsp;constructors&nbsp;of&nbsp;inductives)&nbsp;*)</span><br/>
| <a name="RelInductive"><span class="id" title="constructor">RelInductive</span></a> (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>)<br/>
<span class="comment">(*&nbsp;tRel&nbsp;refers&nbsp;to&nbsp;something&nbsp;else,&nbsp;for&nbsp;example&nbsp;something&nbsp;logical&nbsp;or&nbsp;a&nbsp;value&nbsp;*)</span><br/>
| <a name="RelOther"><span class="id" title="constructor">RelOther</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>(<span class="id" title="var">noeqns</span>) <a name="erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <span class="id" title="definition">context</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">erΓ</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">|</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isT</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;index&nbsp;of&nbsp;the&nbsp;next&nbsp;type&nbsp;variable&nbsp;that&nbsp;is&nbsp;being<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;produced,&nbsp;or&nbsp;None&nbsp;if&nbsp;no&nbsp;more&nbsp;type&nbsp;variables&nbsp;should&nbsp;be<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;produced&nbsp;(when&nbsp;not&nbsp;at&nbsp;the&nbsp;top&nbsp;level).&nbsp;&nbsp;For&nbsp;example,&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type&nbsp;-&gt;&nbsp;nat&nbsp;we&nbsp;should&nbsp;erase&nbsp;to&nbsp;nat&nbsp;with&nbsp;one&nbsp;type&nbsp;var,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;in&nbsp;(Type&nbsp;-&gt;&nbsp;nat)&nbsp;-&gt;&nbsp;nat&nbsp;we&nbsp;should&nbsp;erase&nbsp;to&nbsp;(TBox&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nat)&nbsp;-&gt;&nbsp;nat&nbsp;with&nbsp;no&nbsp;type&nbsp;vars.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">next_tvar</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">name</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<span class="id" title="notation">(</span><span class="id" title="var">Γ</span><span class="id" title="notation">;</span> <span class="id" title="var">t</span><span class="id" title="notation">;</span> <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span><span class="id" title="notation">))</span> : (<span class="id" title="notation">∑</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="inductive">welltyped</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="ConCert.Extraction.Erasure.html#erase_rel"><span class="id" title="definition">erase_rel</span></a> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#isT"><span class="id" title="variable">isT</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_tvar"><span class="id" title="variable">next_tvar</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">reduce_term</span> <span class="id" title="definition">RedFlags.nodelta</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span>)) :=<br/>
<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#eq_hnf"><span class="id" title="variable">eq_hnf</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#is_logical"><span class="id" title="projection">is_logical</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">_</span>) := {<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_viewc"><span class="id" title="definition">erase_type_viewc</span></a> <span class="id" title="var">t</span> := {<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_rel"><span class="id" title="constructor">et_view_rel</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span> @<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#nth_order"><span class="id" title="definition">Vector.nth_order</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#n"><span class="id" title="variable">n</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#RelInductive"><span class="id" title="constructor">RelInductive</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ind"><span class="id" title="variable">ind</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_sort"><span class="id" title="constructor">et_view_sort</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_sort"><span class="id" title="constructor">_</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_prod"><span class="id" title="constructor">et_view_prod</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;logical&nbsp;things&nbsp;we&nbsp;just&nbsp;box&nbsp;and&nbsp;proceed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">true</span></a> |} =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">on_snd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <span class="id" title="var">erΓ</span>)%<span class="id" title="var">vector</span> <span class="id" title="var">B</span> <span class="id" title="var">_</span> <span class="id" title="var">next_tvar</span>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;the&nbsp;type&nbsp;isn't&nbsp;an&nbsp;arity&nbsp;now,&nbsp;then&nbsp;the&nbsp;domain&nbsp;is&nbsp;a&nbsp;"normal"&nbsp;type&nbsp;like&nbsp;nat.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">_</span></a> |} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">dom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">on_snd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <span class="id" title="var">erΓ</span>)%<span class="id" title="var">vector</span> <span class="id" title="var">B</span> <span class="id" title="var">_</span> <span class="id" title="var">next_tvar</span>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Ok,&nbsp;so&nbsp;it&nbsp;is&nbsp;an&nbsp;arity.&nbsp;We&nbsp;add&nbsp;type&nbsp;variables&nbsp;for&nbsp;all<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arities&nbsp;(even&nbsp;non-sorts)&nbsp;because&nbsp;more&nbsp;things&nbsp;are&nbsp;typable&nbsp;without<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coercions&nbsp;this&nbsp;way.&nbsp;In&nbsp;particular,&nbsp;type&nbsp;schemes&nbsp;only&nbsp;used<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;contravariant&nbsp;positions&nbsp;extract&nbsp;to&nbsp;something&nbsp;typable<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;even&nbsp;without&nbsp;higher-kinded&nbsp;types.&nbsp;For&nbsp;example:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Definition&nbsp;test&nbsp;(T&nbsp;:&nbsp;Type&nbsp;-&gt;&nbsp;Type)&nbsp;(x&nbsp;:&nbsp;T&nbsp;nat)&nbsp;(y&nbsp;:&nbsp;T&nbsp;bool)&nbsp;:&nbsp;nat&nbsp;:=&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Definition&nbsp;bar&nbsp;:=&nbsp;test&nbsp;option&nbsp;None&nbsp;None.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;<span class="inlinecode"><span class="id" title="var">bar</span></span>&nbsp;is&nbsp;perfectly&nbsp;extractable&nbsp;without&nbsp;coercions&nbsp;if&nbsp;T&nbsp;becomes&nbsp;a&nbsp;type<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable.&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">var</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">next_tvar</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">i</span> =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">tvars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cod</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#var"><span class="id" title="variable">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <span class="id" title="var">erΓ</span>)%<span class="id" title="var">vector</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">B</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">next_tvar</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="keyword">if</span> <span class="id" title="var">next_tvar</span> <span class="id" title="keyword">then</span> <span class="id" title="projection">binder_name</span> <span class="id" title="var">na</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">tvars</span> <span class="id" title="keyword">else</span> <span class="id" title="var">tvars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a> <span class="id" title="var">cod</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_app"><span class="id" title="constructor">et_view_app</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#orig_hd"><span class="id" title="variable">orig_hd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#orig_arg"><span class="id" title="variable">orig_arg</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">decompose_app</span> (<span class="id" title="constructor">tApp</span> <span class="id" title="var">orig_hd</span> <span class="id" title="var">orig_arg</span>)) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#hd"><span class="id" title="variable">hd</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#decomp_args"><span class="id" title="variable">decomp_args</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#eq_decomp"><span class="id" title="variable">eq_decomp</span></a> :=<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hdbt</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">hd</span> <span class="id" title="keyword">as</span> <span class="id" title="var">h</span> <span class="id" title="keyword">return</span> <a class="idref" href="ConCert.Extraction.Erasure.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tRel</span> <span class="id" title="var">i</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> @<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#nth_order"><span class="id" title="definition">Vector.nth_order</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">i</span> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#RelInductive"><span class="id" title="constructor">RelInductive</span></a> <span class="id" title="var">ind</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> <span class="id" title="var">i</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TConst"><span class="id" title="constructor">TConst</span></a> <span class="id" title="var">kn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tInd</span> <span class="id" title="var">ind</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;for&nbsp;heads&nbsp;that&nbsp;can&nbsp;take&nbsp;args,&nbsp;add&nbsp;args.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Otherwise&nbsp;drop&nbsp;all&nbsp;args.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.ExAst.html#can_have_args"><span class="id" title="definition">can_have_args</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#hdbt"><span class="id" title="variable">hdbt</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">erase_arg</span> (<span class="id" title="var">a</span> : <span class="id" title="inductive">term</span>) (<span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">decomp_args</span>) : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">aT</span>, <span class="id" title="var">princaT</span>) := <span class="id" title="definition">infer</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ</span> <a class="idref" href="ConCert.Extraction.Erasure.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <span class="id" title="var">Γ</span> <a class="idref" href="ConCert.Extraction.Erasure.html#aT"><span class="id" title="variable">aT</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">{|</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">true</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">|}</span></a> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">{|</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">car</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">|}</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#is_sort"><span class="id" title="definition">is_sort</span></a> <span class="id" title="var">car</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">conv_sort</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <a class="idref" href="ConCert.Extraction.Erasure.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a> <span class="comment">(*&nbsp;non-sort&nbsp;arity&nbsp;or&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#mkTApps"><span class="id" title="definition">mkTApps</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#hdbt"><span class="id" title="variable">hdbt</span></a> (<a class="idref" href="ConCert.Extraction.Utils.html#map_In"><span class="id" title="definition">map_In</span></a> <span class="id" title="var">decomp_args</span> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_arg"><span class="id" title="variable">erase_arg</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#hdbt"><span class="id" title="variable">hdbt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_const"><span class="id" title="constructor">et_view_const</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_const"><span class="id" title="constructor">_</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TConst"><span class="id" title="constructor">TConst</span></a> <span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_ind"><span class="id" title="constructor">et_view_ind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_ind"><span class="id" title="constructor">_</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_other"><span class="id" title="constructor">et_view_other</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#et_view_other"><span class="id" title="constructor">_</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Solve</span> <span class="id" title="keyword">All</span> <span class="id" title="keyword">Obligations</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Tactics.program_simplify</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CoreTactics.equations_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">reduce_term_sound</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">Γ</span> (<span class="id" title="constructor">tRel</span> <span class="id" title="var">i</span>)<span class="id" title="notation">∥</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">s</span> &amp; <span class="id" title="var">typ</span>)] <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">eq_hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">subject_reduction</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_Rel</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">_</span> &amp; ? &amp; <span class="id" title="var">_</span>); [|<span class="id" title="var">easy</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#nth_error_Some"><span class="id" title="lemma">nth_error_Some</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">eq_hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">isT</span> <span class="id" title="keyword">as</span> [(? &amp; <span class="id" title="var">typ</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">subject_reduction</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="constructor">tApp</span> <span class="id" title="var">orig_hd</span> <span class="id" title="var">orig_arg</span>) <span class="id" title="keyword">with</span> (<span class="id" title="definition">mkApps</span> (<span class="id" title="constructor">tRel</span> <span class="id" title="var">i</span>) <span class="id" title="var">decomp_args</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">decompose_app_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq_decomp</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_mkApps</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; [|<span class="id" title="var">easy</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">rel_type</span> &amp; <span class="id" title="var">rel_typed</span> &amp; <span class="id" title="var">spine</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_Rel</span> <span class="id" title="tactic">in</span> <span class="id" title="var">rel_typed</span>; [|<span class="id" title="var">easy</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#nth_error_Some"><span class="id" title="lemma">nth_error_Some</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">rel_typed</span> <span class="id" title="keyword">as</span> (? &amp; <span class="id" title="var">_</span> &amp; ? &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">case</span> <a class="idref" href="ConCert.Extraction.Erasure.html#0092e1d1eb2c83b5c9c9e76adf01b47b"><span class="id" title="variable">wfextΣ</span></a>; <span class="id" title="tactic">intros</span> [[]]. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">eq_hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">isT</span> <span class="id" title="keyword">as</span> [(? &amp; <span class="id" title="var">typ</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">subject_reduction</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="constructor">tApp</span> <span class="id" title="var">orig_hd</span> <span class="id" title="var">orig_arg</span>) <span class="id" title="keyword">with</span> (<span class="id" title="definition">mkApps</span> <span class="id" title="var">hd</span> <span class="id" title="var">decomp_args</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">decompose_app_inv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq_decomp</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_mkApps</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; [|<span class="id" title="var">easy</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; <span class="id" title="var">spine</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">spine</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">spine</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">princaT</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">typ</span> &amp; <span class="id" title="var">princaT</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity_term</span>; [<span class="id" title="var">easy</span>|<span class="id" title="tactic">exact</span> <span class="id" title="var">typ</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">princaT</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">typ</span> &amp; <span class="id" title="var">princaT</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">conv_sort</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">univ</span> &amp; <span class="id" title="var">reduniv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">wfΣu</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">univ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">type_reduction</span>; [<span class="id" title="tactic">exact</span> <span class="id" title="var">typ</span>|<span class="id" title="var">easy</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">eq_hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="constructor">tApp</span> <span class="id" title="var">orig_hd</span> <span class="id" title="var">orig_arg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq_decomp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="erase_type"><span class="id" title="definition">erase_type</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) (<span class="id" title="var">isT</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a><span class="id" title="notation">∥</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">name</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#4591d6c2b36fedc12d5b1c142546a37e"><span class="id" title="notation">[]</span></a>%<span class="id" title="var">vector</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#isT"><span class="id" title="variable">isT</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typwt"><span class="id" title="lemma">typwt</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="notation">∥</span><a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">;;;</span> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">|-</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">:</span> <a class="idref" href="ConCert.Extraction.Erasure.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">∥</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">welltyped</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">typ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="erase_type_scheme_view"><span class="id" title="inductive">erase_type_scheme_view</span></a> : <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="erase_type_scheme_view_lam"><span class="id" title="constructor">erase_type_scheme_view_lam</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view"><span class="id" title="inductive">erase_type_scheme_view</span></a> (<span class="id" title="constructor">tLambda</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>)<br/>
| <a name="erase_type_scheme_view_other"><span class="id" title="constructor">erase_type_scheme_view_other</span></a> <span class="id" title="var">t</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<span class="id" title="definition">isLambda</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view"><span class="id" title="inductive">erase_type_scheme_view</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="erase_type_scheme_viewc"><span class="id" title="definition">erase_type_scheme_viewc</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view"><span class="id" title="inductive">erase_type_scheme_view</span></a> <span class="id" title="var">t</span> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_viewc"><span class="id" title="definition">erase_type_scheme_viewc</span></a> (<span class="id" title="constructor">tLambda</span> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>) := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view_lam"><span class="id" title="constructor">erase_type_scheme_view_lam</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_viewc"><span class="id" title="definition">erase_type_scheme_viewc</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view_other"><span class="id" title="constructor">erase_type_scheme_view_other</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="type_var_info_of_flag"><span class="id" title="definition">type_var_info_of_flag</span></a> (<span class="id" title="var">na</span> : <span class="id" title="definition">aname</span>) {<span class="id" title="var">Γ</span> <span class="id" title="var">t</span>} (<span class="id" title="var">f</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#type_flag"><span class="id" title="record">type_flag</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">tvar_name</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">binder_name</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">na</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">tvar_is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">is_logical</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">f</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">tvar_is_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">if</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">is_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">f</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">then</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">true</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">else</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">false</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">tvar_is_sort</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">if</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">is_sort</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">f</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">then</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">true</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">else</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">false</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_type_var_info"><span class="id" title="constructor">;</span></a> |}.<br/>

<br/>
<span class="comment">(*&nbsp;For&nbsp;a&nbsp;non-lambda&nbsp;type&nbsp;scheme,&nbsp;i.e.<br/>
&nbsp;&nbsp;&nbsp;t&nbsp;:&nbsp;T1&nbsp;-&gt;&nbsp;T2&nbsp;-&gt;&nbsp;...&nbsp;-&gt;&nbsp;Tn&nbsp;-&gt;&nbsp;Type<br/>
&nbsp;&nbsp;&nbsp;where&nbsp;t&nbsp;is&nbsp;not&nbsp;a&nbsp;lambda,&nbsp;finish&nbsp;erasing&nbsp;it&nbsp;as&nbsp;a&nbsp;type&nbsp;scheme<br/>
&nbsp;&nbsp;&nbsp;by&nbsp;repeatedly&nbsp;eta&nbsp;expanding&nbsp;it&nbsp;*)</span><br/>
<span class="id" title="keyword">Equations</span>? (<span class="id" title="var">noeqns</span>) <a name="erase_type_scheme_eta"><span class="id" title="definition">erase_type_scheme_eta</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <span class="id" title="definition">context</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">erΓ</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">|</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ar_ctx</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arity_ass"><span class="id" title="definition">arity_ass</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ar_univ</span> : <span class="id" title="definition">Universe.t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">typ</span> : <span class="id" title="notation">∥</span><a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">;;;</span> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">|-</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">:</span> <a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ar_ctx"><span class="id" title="variable">ar_ctx</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ar_univ"><span class="id" title="variable">ar_univ</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">next_tvar</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_eta"><span class="id" title="definition">erase_type_scheme_eta</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#typ"><span class="id" title="variable">typ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_tvar"><span class="id" title="variable">next_tvar</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">t</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">).2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_eta"><span class="id" title="definition">erase_type_scheme_eta</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ar_ctx"><span class="id" title="variable">ar_ctx</span></a>) <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#typ"><span class="id" title="variable">typ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_tvar"><span class="id" title="variable">next_tvar</span></a> =&gt;<br/>
<span class="id" title="keyword">let</span> <span class="id" title="var">inf</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#type_var_info_of_flag"><span class="id" title="definition">type_var_info_of_flag</span></a> <span class="id" title="var">na</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> (<span class="id" title="var">kind</span>, <span class="id" title="var">new_next_tvar</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.ExAst.html#tvar_is_arity"><span class="id" title="projection">tvar_is_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#inf"><span class="id" title="variable">inf</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> <span class="id" title="var">next_tvar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">next_tvar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">next_tvar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">infs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">bt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_eta"><span class="id" title="definition">erase_type_scheme_eta</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Erasure.html#kind"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <span class="id" title="var">erΓ</span>)%<span class="id" title="var">vector</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="constructor">tApp</span> (<span class="id" title="abbreviation">lift0</span> 1 <span class="id" title="var">t</span>) (<span class="id" title="constructor">tRel</span> 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ar_ctx</span> <span class="id" title="var">univ</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#new_next_tvar"><span class="id" title="variable">new_next_tvar</span></a> <span class="id" title="tactic">in</span><br/>
<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#inf"><span class="id" title="variable">inf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">infs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">bt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">typ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">wf_local</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">typing_wf_local</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">validity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">isType_tProd</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">inf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">typ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">typing_wf_local</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">wfl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">wflext</span>: <span class="id" title="notation">wf_local</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <span class="id" title="notation">(</span><span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">validity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">isType_tProd</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">typ</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">isType_wf_local</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">PCUICSpine.subst_rel0_lift_id</span> 0 (<a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <span class="id" title="var">ar_ctx</span> <span class="id" title="var">univ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">typ_valid</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">typ_valid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u</span> <span class="id" title="var">Hty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">type_App</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">typ</span>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">PCUICWeakening.weakening</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">wflext</span> <span class="id" title="var">Hty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> (<span class="id" title="lemma">PCUICWeakening.weakening</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">wflext</span> <span class="id" title="var">typ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">fold</span> <span class="id" title="definition">lift</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<span class="id" title="constructor">type_Rel</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>)); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>? (<span class="id" title="var">noeqns</span>) <a name="erase_type_scheme"><span class="id" title="definition">erase_type_scheme</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <span class="id" title="definition">context</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">erΓ</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">|</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ar_ctx</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arity_ass"><span class="id" title="definition">arity_ass</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ar_univ</span> : <span class="id" title="definition">Universe.t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">typ</span> : <span class="id" title="notation">∥</span><a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">;;;</span> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">|-</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">:</span> <a class="idref" href="ConCert.Extraction.Erasure.html#mkNormalArity"><span class="id" title="definition">mkNormalArity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ar_ctx"><span class="id" title="variable">ar_ctx</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ar_univ"><span class="id" title="variable">ar_univ</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">next_tvar</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme"><span class="id" title="definition">erase_type_scheme</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#typ"><span class="id" title="variable">typ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_tvar"><span class="id" title="variable">next_tvar</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">t</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">).2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme"><span class="id" title="definition">erase_type_scheme</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#na'"><span class="id" title="variable">na'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A'"><span class="id" title="variable">A'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ar_ctx"><span class="id" title="variable">ar_ctx</span></a>) <a class="idref" href="ConCert.Extraction.Erasure.html#univ"><span class="id" title="variable">univ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#typ"><span class="id" title="variable">typ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_tvar"><span class="id" title="variable">next_tvar</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">reduce_term</span> <span class="id" title="definition">RedFlags.nodelta</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#typwt"><span class="id" title="lemma">typwt</span></a> <span class="id" title="var">typ</span>)) := {<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#thnf"><span class="id" title="variable">thnf</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#eq_hnf"><span class="id" title="variable">eq_hnf</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_viewc"><span class="id" title="definition">erase_type_scheme_viewc</span></a> <span class="id" title="var">thnf</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view_lam"><span class="id" title="constructor">erase_type_scheme_view_lam</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#body"><span class="id" title="variable">body</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">inf</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#type_var_info_of_flag"><span class="id" title="definition">type_var_info_of_flag</span></a> <span class="id" title="var">na</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">kind</span>, <span class="id" title="var">new_next_tvar</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.ExAst.html#tvar_is_arity"><span class="id" title="projection">tvar_is_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#inf"><span class="id" title="variable">inf</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> <span class="id" title="var">next_tvar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">next_tvar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">next_tvar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">infs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">bt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme"><span class="id" title="definition">erase_type_scheme</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#kind"><span class="id" title="variable">kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <span class="id" title="var">erΓ</span>)%<span class="id" title="var">vector</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">body</span> <span class="id" title="var">ar_ctx</span> <span class="id" title="var">univ</span> <span class="id" title="var">_</span> <a class="idref" href="ConCert.Extraction.Erasure.html#new_next_tvar"><span class="id" title="variable">new_next_tvar</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#inf"><span class="id" title="variable">inf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">infs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">bt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view_other"><span class="id" title="constructor">erase_type_scheme_view_other</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#thnf"><span class="id" title="variable">thnf</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_view_other"><span class="id" title="constructor">_</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme_eta"><span class="id" title="definition">erase_type_scheme_eta</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">t</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">na'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">A'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">ar_ctx</span>) <span class="id" title="var">univ</span> <span class="id" title="var">typ</span> <span class="id" title="var">next_tvar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">typ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">subject_reduction</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_Lambda</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">inf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">typ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reduce_term_sound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">subject_reduction</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inversion_Lambda</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">wf_local</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">typing_wf_local</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">cumul_Prod_inv_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> ((?&amp;?)&amp;?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">eq_hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">typ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">isType_tProd</span> <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; (<span class="id" title="var">u</span>&amp;?)); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">conv_context</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <span class="id" title="definition">vass</span> <span class="id" title="var">na'</span> <span class="id" title="var">A'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">constructor</span>; [<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">type_Cumul</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">context_conversion</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">typing_wf_local</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="instance">conv_context_sym</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">cumul_conv_ctx</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ExAst</span>.<br/>
<span class="id" title="keyword">Equations</span>? (<span class="id" title="var">noeqns</span>) <a name="erase_constant_decl"><span class="id" title="definition">erase_constant_decl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">cst</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#constant_body"><span class="id" title="record">P.constant_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">wt</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">on_constant_decl</span> (<span class="id" title="definition">lift_typing</span> <span class="id" title="inductive">typing</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#cst"><span class="id" title="variable">cst</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="ConCert.Extraction.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_constant_decl"><span class="id" title="definition">erase_constant_decl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#cst"><span class="id" title="variable">cst</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#wt"><span class="id" title="variable">wt</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#cst_type"><span class="id" title="projection">P.cst_type</span></a> <span class="id" title="var">cst</span>) <span class="id" title="var">_</span> := {<br/>
&nbsp;&nbsp;| {| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">car</span></a> |} <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#cst_body"><span class="id" title="projection">P.cst_body</span></a> <span class="id" title="var">cst</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#body"><span class="id" title="variable">body</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#body_eq"><span class="id" title="variable">body_eq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_scheme"><span class="id" title="definition">erase_type_scheme</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#4591d6c2b36fedc12d5b1c142546a37e"><span class="id" title="notation">[]</span></a>%<span class="id" title="var">vector</span> <span class="id" title="var">body</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#conv_ar_context"><span class="id" title="projection">conv_ar_context</span></a> <span class="id" title="var">car</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#conv_ar_univ"><span class="id" title="projection">conv_ar_univ</span></a> <span class="id" title="var">car</span>) <span class="id" title="var">_</span> 0));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;};<br/>
&nbsp;&nbsp;| {| <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">conv_ar</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">inr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#build_flag"><span class="id" title="constructor">notar</span></a> |} =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> {| <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">cst_type</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">erase_type</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">P.cst_type</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">cst</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">_</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_constant_body"><span class="id" title="constructor">erased_body</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">where</span> <a class="idref" href="ConCert.Extraction.Erasure.html#erased_body"><span class="id" title="definition">erased_body</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="inductive">term</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#erased_body"><span class="id" title="definition">erased_body</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#cst_body"><span class="id" title="projection">P.cst_body</span></a> <span class="id" title="var">cst</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#body"><span class="id" title="variable">body</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#body_eq"><span class="id" title="variable">body_eq</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">ErasureFunction.erase</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#0092e1d1eb2c83b5c9c9e76adf01b47b"><span class="id" title="variable">wfextΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">body</span> <span class="id" title="var">_</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">on_constant_decl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#cst_body"><span class="id" title="projection">P.cst_body</span></a> <span class="id" title="var">cst</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity_term</span>; [<span class="id" title="var">easy</span>|<span class="id" title="tactic">exact</span> <span class="id" title="var">wt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="definition">on_constant_decl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">body_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">car</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ctx</span> <span class="id" title="var">univ</span> [<span class="id" title="var">r</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">type_reduction</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">on_constant_decl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">body_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">erased_body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">on_constant_decl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#cst_body"><span class="id" title="projection">P.cst_body</span></a> <span class="id" title="var">cst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">validity_term</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>; [|<span class="id" title="var">now</span> <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span> &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">P</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>? (<span class="id" title="var">noeqns</span>) <a name="erase_ind_arity"><span class="id" title="definition">erase_ind_arity</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#context"><span class="id" title="definition">context</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#term"><span class="id" title="inductive">term</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isT</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a><span class="id" title="notation">∥</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<span class="id" title="notation">(</span><span class="id" title="var">Γ</span><span class="id" title="notation">;</span> <span class="id" title="var">t</span><span class="id" title="notation">;</span> <a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span><span class="id" title="notation">)</span> : (<span class="id" title="notation">∑</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="inductive">welltyped</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="ConCert.Extraction.Erasure.html#erase_rel"><span class="id" title="definition">erase_rel</span></a> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_arity"><span class="id" title="definition">erase_ind_arity</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#isT"><span class="id" title="variable">isT</span></a> <span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">hnf</span> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span>)) := {<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#hnf_eq"><span class="id" title="variable">hnf_eq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hd</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#type_var_info_of_flag"><span class="id" title="definition">type_var_info_of_flag</span></a> <span class="id" title="var">na</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#flag_of_type"><span class="id" title="definition">flag_of_type</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tl</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_arity"><span class="id" title="definition">erase_ind_arity</span></a> (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <a class="idref" href="ConCert.Extraction.Erasure.html#vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) <span class="id" title="var">B</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#hd"><span class="id" title="variable">hd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tl"><span class="id" title="variable">tl</span></a>;<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">_</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ind_aname"><span class="id" title="definition">ind_aname</span></a> (<span class="id" title="var">oib</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#one_inductive_body"><span class="id" title="record">P.one_inductive_body</span></a>) :=<br/>
&nbsp;&nbsp;{| <span class="id" title="constructor">binder_name</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">nNamed</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">P.ind_name</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">binder_relevance</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">P.ind_relevance</span> <span class="id" title="constructor">oib</span> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="arities_contexts"><span class="id" title="definition">arities_contexts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mind</span> : <span class="id" title="definition">kername</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">oibs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#one_inductive_body"><span class="id" title="record">P.one_inductive_body</span></a>) : <span class="id" title="notation">∑</span><span class="id" title="var">Γ</span><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">|</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> (<span class="id" title="var">oibs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#one_inductive_body"><span class="id" title="record">P.one_inductive_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#context"><span class="id" title="definition">context</span></a>) (<span class="id" title="var">erΓ</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">|</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">;</span> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">oib</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">oibs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">,,</span> <a class="idref" href="ConCert.Extraction.Erasure.html#vass"><span class="id" title="definition">vass</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_aname"><span class="id" title="definition">ind_aname</span></a> <span class="id" title="var">oib</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_type"><span class="id" title="projection">P.ind_type</span></a> <span class="id" title="var">oib</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Erasure.html#RelInductive"><span class="id" title="constructor">RelInductive</span></a> {| <span class="id" title="constructor">inductive_mind</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">mind</span><span class="id" title="constructor">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">inductive_ind</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">i</span> |} <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a>)%<span class="id" title="var">vector</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#4591d6c2b36fedc12d5b1c142546a37e"><span class="id" title="notation">[]</span></a>%<span class="id" title="var">vector</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="arities_contexts_cons_1"><span class="id" title="lemma">arities_contexts_cons_1</span></a> <span class="id" title="var">mind</span> <span class="id" title="var">oib</span> <span class="id" title="var">oibs</span> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts"><span class="id" title="definition">arities_contexts</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mind"><span class="id" title="variable">mind</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a>)<span class="id" title="notation">).π1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts"><span class="id" title="definition">arities_contexts</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mind"><span class="id" title="variable">mind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a><span class="id" title="notation">).π1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#vass"><span class="id" title="definition">vass</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_aname"><span class="id" title="definition">ind_aname</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a>) (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_type"><span class="id" title="projection">P.ind_type</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts"><span class="id" title="definition">arities_contexts</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="notation">(</span>?<span class="id" title="var">f'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">).π1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">set</span> (<span class="id" title="var">f</span> := <span class="id" title="var">f'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">oibs</span> <span class="id" title="var">n</span> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span>, <span class="id" title="notation">(</span><span class="id" title="var">f</span> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a><span class="id" title="notation">).π1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><span class="id" title="var">f</span> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#4591d6c2b36fedc12d5b1c142546a37e"><span class="id" title="notation">[]</span></a>%<span class="id" title="var">vector</span><span class="id" title="notation">).π1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">oibs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">oibs</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">oib</span> <span class="id" title="var">oibs</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">List.app_assoc</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="arities_contexts_1"><span class="id" title="lemma">arities_contexts_1</span></a> <span class="id" title="var">mind</span> <span class="id" title="var">oibs</span> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts"><span class="id" title="definition">arities_contexts</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mind"><span class="id" title="variable">mind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a><span class="id" title="notation">).π1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#arities_context"><span class="id" title="definition">arities_context</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oibs"><span class="id" title="variable">oibs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">oibs</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">oib</span> <span class="id" title="var">oibs</span> <span class="id" title="var">IH</span>]; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts_cons_1"><span class="id" title="lemma">arities_contexts_cons_1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Extraction.Erasure.html#arities_context"><span class="id" title="definition">arities_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">rev_map_cons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="view_prod"><span class="id" title="inductive">view_prod</span></a> : <a class="idref" href="ConCert.Extraction.Erasure.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="view_prod_prod"><span class="id" title="constructor">view_prod_prod</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod"><span class="id" title="inductive">view_prod</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a>)<br/>
| <a name="view_prod_other"><span class="id" title="constructor">view_prod_other</span></a> <span class="id" title="var">t</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<span class="id" title="definition">isProd</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod"><span class="id" title="inductive">view_prod</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="view_prodc"><span class="id" title="definition">view_prodc</span></a> (<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod"><span class="id" title="inductive">view_prod</span></a> <span class="id" title="var">t</span> :=<br/>
| <a class="idref" href="ConCert.Extraction.Erasure.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod_prod"><span class="id" title="constructor">view_prod_prod</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
| <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod_other"><span class="id" title="constructor">view_prod_other</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Constructors&nbsp;are&nbsp;treated&nbsp;slightly&nbsp;differently&nbsp;to&nbsp;types&nbsp;as&nbsp;we&nbsp;always<br/>
&nbsp;&nbsp;&nbsp;generate&nbsp;type&nbsp;variables&nbsp;for&nbsp;parameters&nbsp;*)</span><br/>
<span class="id" title="keyword">Equations</span>? (<span class="id" title="var">noeqns</span>) <a name="erase_ind_ctor"><span class="id" title="definition">erase_ind_ctor</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#context"><span class="id" title="definition">context</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">erΓ</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">Vector.t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tRel_kind"><span class="id" title="inductive">tRel_kind</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">|</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#term"><span class="id" title="inductive">term</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">isT</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">isType</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">next_par</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">tvars</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">struct</span> <span class="id" title="var">tvars</span> :=<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_ctor"><span class="id" title="definition">erase_ind_ctor</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#isT"><span class="id" title="variable">isT</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_par"><span class="id" title="variable">next_par</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> := <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">t</span> <span class="id" title="var">isT</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">).2</span>;<br/>
<br/>
<a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_ctor"><span class="id" title="definition">erase_ind_ctor</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#201a9d906d882cd7c91588a68793245d"><span class="id" title="variable">erΓ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#isT"><span class="id" title="variable">isT</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#next_par"><span class="id" title="variable">next_par</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#tvar"><span class="id" title="variable">tvar</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#tvars"><span class="id" title="variable">tvars</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="definition">inspect</span> (<span class="id" title="definition">reduce_term</span> <span class="id" title="definition">RedFlags.nodelta</span> <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#5df1c2d607c8f6490df82183e581598b"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#tywt"><span class="id" title="lemma">tywt</span></a> <span class="id" title="var">isT</span>)) :=<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#eq_red"><span class="id" title="variable">eq_red</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ConCert.Extraction.Erasure.html#view_prodc"><span class="id" title="definition">view_prodc</span></a> <span class="id" title="var">t</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod_prod"><span class="id" title="constructor">view_prod_prod</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#na"><span class="id" title="variable">na</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#B"><span class="id" title="variable">B</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">rel_kind</span> := <span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.ExAst.html#tvar_is_arity"><span class="id" title="projection">tvar_is_arity</span></a> <span class="id" title="var">tvar</span> <span class="id" title="keyword">then</span> <a class="idref" href="ConCert.Extraction.Erasure.html#RelTypeVar"><span class="id" title="constructor">RelTypeVar</span></a> <span class="id" title="var">next_par</span> <span class="id" title="keyword">else</span> <a class="idref" href="ConCert.Extraction.Erasure.html#RelOther"><span class="id" title="constructor">RelOther</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">dom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_type_aux"><span class="id" title="definition">erase_type_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">erΓ</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cod</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_ctor"><span class="id" title="definition">erase_ind_ctor</span></a> (<span class="id" title="var">Γ</span><span class="id" title="notation">,,</span> <a class="idref" href="ConCert.Extraction.Erasure.html#vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#rel_kind"><span class="id" title="variable">rel_kind</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Vectors.VectorDef.html#9d71de972cb1e2f2983983345333cec4"><span class="id" title="notation">::</span></a> <span class="id" title="var">erΓ</span>)%<span class="id" title="var">vector</span> <span class="id" title="var">B</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">next_par</span>) <span class="id" title="var">tvars</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <a class="idref" href="ConCert.Extraction.Erasure.html#cod"><span class="id" title="variable">cod</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod_other"><span class="id" title="constructor">view_prod_other</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod_other"><span class="id" title="constructor">_</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#view_prod_other"><span class="id" title="constructor">_</span></a> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a> <span class="comment">(*&nbsp;unreachable&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">all</span>: <span class="id" title="var">reduce_term_sound</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">erase</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ExAst</span>.<br/>
<span class="id" title="keyword">Definition</span> <a name="erase_ind_body"><span class="id" title="definition">erase_ind_body</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mind</span> : <span class="id" title="definition">kername</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mib</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#mutual_inductive_body"><span class="id" title="record">P.mutual_inductive_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">oib</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#one_inductive_body"><span class="id" title="record">P.one_inductive_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">wt</span> : <span class="id" title="notation">∥</span><span class="id" title="notation">∑</span><span class="id" title="var">i</span><span class="id" title="notation">,</span> <span class="id" title="record">on_ind_body</span> (<span class="id" title="definition">lift_typing</span> <span class="id" title="inductive">typing</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mind"><span class="id" title="variable">mind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mib"><span class="id" title="variable">mib</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a><span class="id" title="notation">∥</span>) : <a class="idref" href="ConCert.Extraction.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">refine</span> (<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">is_propositional</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">destArity</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_type"><span class="id" title="projection">ind_type</span></a> <span class="id" title="var">oib</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="definition">is_propositional</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">oib_tvars</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_arity"><span class="id" title="definition">erase_ind_arity</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_type"><span class="id" title="projection">P.ind_type</span></a> <span class="id" title="var">oib</span>) <span class="id" title="var">_</span> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctx</span> := <span class="id" title="definition">inspect</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts"><span class="id" title="definition">arities_contexts</span></a> <span class="id" title="var">mind</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_bodies"><span class="id" title="projection">P.ind_bodies</span></a> <span class="id" title="var">mib</span>)) <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ind_params</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#firstn"><span class="id" title="definition">firstn</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_npars"><span class="id" title="projection">P.ind_npars</span></a> <span class="id" title="var">mib</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#oib_tvars"><span class="id" title="variable">oib_tvars</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">erase_ind_ctor</span> (<span class="id" title="var">p</span> : <span class="id" title="notation">(</span><span class="id" title="definition">ident</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Erasure.html#term"><span class="id" title="inductive">P.term</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">is_in</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_ctors"><span class="id" title="projection">P.ind_ctors</span></a> <span class="id" title="var">oib</span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bt</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_ctor"><span class="id" title="definition">erase_ind_ctor</span></a> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ctx"><span class="id" title="variable">ctx</span></a><span class="id" title="notation">).π1</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ctx"><span class="id" title="variable">ctx</span></a><span class="id" title="notation">).π2</span> <a class="idref" href="ConCert.Extraction.Erasure.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">.1</span><span class="id" title="notation">.2</span> <span class="id" title="var">_</span> 0 <a class="idref" href="ConCert.Extraction.Erasure.html#ind_params"><span class="id" title="variable">ind_params</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctor_args</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.ExAst.html#decompose_arr"><span class="id" title="definition">decompose_arr</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#bt"><span class="id" title="variable">bt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">decomp_names</span> <span class="id" title="var">ty</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#ty"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#tProd"><span class="id" title="constructor">P.tProd</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> =&gt; <span class="id" title="projection">binder_name</span> <span class="id" title="var">na</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#decomp_names"><span class="id" title="variable">decomp_names</span></a> <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#tLetIn"><span class="id" title="constructor">P.tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">a</span> <span class="id" title="var">A</span> <span class="id" title="var">b</span> =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#decomp_names"><span class="id" title="variable">decomp_names</span></a> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">.1.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#combine"><span class="id" title="definition">combine</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#decomp_names"><span class="id" title="variable">decomp_names</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">.1</span><span class="id" title="notation">.2</span>) <span class="id" title="var">ctor_args</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctors</span> := <a class="idref" href="ConCert.Extraction.Utils.html#map_In"><span class="id" title="definition">map_In</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_ctors"><span class="id" title="projection">P.ind_ctors</span></a> <span class="id" title="var">oib</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_ctor"><span class="id" title="variable">erase_ind_ctor</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">erase_ind_proj</span> (<span class="id" title="var">p</span> : <span class="id" title="definition">ident</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Erasure.html#term"><span class="id" title="inductive">P.term</span></a>) (<span class="id" title="var">is_in</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_projs"><span class="id" title="projection">P.ind_projs</span></a> <span class="id" title="var">oib</span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="comment">(*&nbsp;todo&nbsp;*)</span> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">projs</span> := <a class="idref" href="ConCert.Extraction.Utils.html#map_In"><span class="id" title="definition">map_In</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_projs"><span class="id" title="projection">P.ind_projs</span></a> <span class="id" title="var">oib</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_proj"><span class="id" title="variable">erase_ind_proj</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_name</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">P.ind_name</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_propositional</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">is_propositional</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_kelim</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">P.ind_kelim</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_type_vars</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">oib_tvars</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ctors</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctor_original_arities</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">map</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">snd</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">P.ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">ind_projs</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_one_inductive_body"><span class="id" title="constructor">projs</span></a> |}).<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="projection">onArity</span> <span class="id" title="var">wt</span><span class="id" title="notation">.π2</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> ((?&amp;?)&amp;?);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">ind_index</span> <span class="id" title="var">wt</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="projection">onConstructors</span> <span class="id" title="var">wt</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">on_ctors</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">on_constructors</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on_ctors</span>; [<span class="id" title="var">easy</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">is_in</span> <span class="id" title="keyword">as</span> [-&gt;|<span class="id" title="var">later</span>]; [|<span class="id" title="var">easy</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="projection">on_ctype</span> <span class="id" title="var">r</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span> &amp; <span class="id" title="var">typ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ConCert.Extraction.Erasure.html#arities_contexts_1"><span class="id" title="lemma">arities_contexts_1</span></a> <span class="id" title="var">mind</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">typ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a name="erase_ind"><span class="id" title="definition">erase_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mib</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#mutual_inductive_body"><span class="id" title="record">P.mutual_inductive_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">wt</span> : <span class="id" title="notation">∥</span><span class="id" title="record">on_inductive</span> (<span class="id" title="definition">lift_typing</span> <span class="id" title="inductive">typing</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#240031303eb9cc2581261ebb4984d35a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mib"><span class="id" title="variable">mib</span></a><span class="id" title="notation">∥</span>) : <a class="idref" href="ConCert.Extraction.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">inds</span> := <a class="idref" href="ConCert.Extraction.Utils.html#map_In"><span class="id" title="definition">map_In</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_bodies"><span class="id" title="projection">P.ind_bodies</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mib"><span class="id" title="variable">mib</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">oib</span> <span class="id" title="var">is_in</span> =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind_body"><span class="id" title="definition">erase_ind_body</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#mib"><span class="id" title="variable">mib</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_npars</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">P.ind_npars</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">mib</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_bodies</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#Build_mutual_inductive_body"><span class="id" title="constructor">inds</span></a> |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#In_nth_error"><span class="id" title="lemma">In_nth_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">is_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">is_in</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span> &amp; <span class="id" title="var">nth_some</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="projection">onInductives</span> <span class="id" title="var">wt</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0 <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span> <span class="id" title="var">nth_some</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#ind_bodies"><span class="id" title="projection">P.ind_bodies</span></a> <span class="id" title="var">mib</span>) <span class="id" title="keyword">as</span> [|? <span class="id" title="var">oibs</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">nth_some</span> <span class="id" title="var">n</span> <span class="id" title="var">inds_wt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">nth_error_nil</span> <span class="id" title="tactic">in</span> <span class="id" title="var">nth_some</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">inds_wt</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">inds_wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">replace</span> <span class="id" title="var">a</span> <span class="id" title="keyword">with</span> <span class="id" title="var">oib</span> <span class="id" title="tactic">in</span> * <span class="id" title="tactic">by</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">_</span> <span class="id" title="var">nth_some</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Erasure.html#FixSigmaExt"><span class="id" title="section">FixSigmaExt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="EraseEnv"><span class="id" title="section">EraseEnv</span></a>.<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">extraction_checker_flags</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ExAst</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a name="erase_global_decl"><span class="id" title="definition">erase_global_decl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Σext</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#global_env_ext"><span class="id" title="definition">P.global_env_ext</span></a>) (<span class="id" title="var">wfΣext</span> : <span class="id" title="notation">∥</span><span class="id" title="class">wf_ext</span> <a class="idref" href="ConCert.Extraction.Erasure.html#f1da7e49fb083147c77c8d337cd7ffad"><span class="id" title="variable">Σext</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">decl</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#global_decl"><span class="id" title="inductive">P.global_decl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">wt</span> : <span class="id" title="notation">∥</span><span class="id" title="definition">on_global_decl</span> (<span class="id" title="definition">lift_typing</span> <span class="id" title="inductive">typing</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#f1da7e49fb083147c77c8d337cd7ffad"><span class="id" title="variable">Σext</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#decl"><span class="id" title="variable">decl</span></a><span class="id" title="notation">∥</span>) : <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#decl"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#ConstantDecl"><span class="id" title="constructor">P.ConstantDecl</span></a> <span class="id" title="var">cst</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#erase_constant_decl"><span class="id" title="definition">erase_constant_decl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#f1da7e49fb083147c77c8d337cd7ffad"><span class="id" title="variable">Σext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">cst</span> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">cst</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">ta</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.Erasure.html#InductiveDecl"><span class="id" title="constructor">P.InductiveDecl</span></a> <span class="id" title="var">mib</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#erase_ind"><span class="id" title="definition">erase_ind</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#f1da7e49fb083147c77c8d337cd7ffad"><span class="id" title="variable">Σext</span></a> <span class="id" title="var">_</span> <a class="idref" href="ConCert.Extraction.Erasure.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="var">mib</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="box_type_deps"><span class="id" title="definition">box_type_deps</span></a> (<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <span class="id" title="definition">KernameSet.t</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="definition">KernameSet.empty</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> =&gt; <span class="id" title="definition">KernameSet.union</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#box_type_deps"><span class="id" title="definition">box_type_deps</span></a> <span class="id" title="var">t1</span>) (<a class="idref" href="ConCert.Extraction.Erasure.html#box_type_deps"><span class="id" title="definition">box_type_deps</span></a> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span> =&gt; <span class="id" title="definition">KernameSet.singleton</span> (<span class="id" title="projection">inductive_mind</span> <span class="id" title="var">ind</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TConst"><span class="id" title="constructor">TConst</span></a> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">KernameSet.singleton</span> <span class="id" title="var">kn</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="decl_deps"><span class="id" title="definition">decl_deps</span></a> (<span class="id" title="var">decl</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <span class="id" title="definition">KernameSet.t</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#decl"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">body</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">seen</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> <span class="id" title="var">body</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> =&gt; <span class="id" title="definition">term_global_deps</span> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="definition">KernameSet.empty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">KernameSet.union</span> (<a class="idref" href="ConCert.Extraction.Erasure.html#box_type_deps"><span class="id" title="definition">box_type_deps</span></a> <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> <span class="id" title="var">body</span><span class="id" title="notation">).2</span>) <a class="idref" href="ConCert.Extraction.Erasure.html#seen"><span class="id" title="variable">seen</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">one_inductive_body_deps</span> <span class="id" title="var">oib</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">seen</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">seen</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">bt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="definition">KernameSet.union</span> <a class="idref" href="ConCert.Extraction.Erasure.html#seen"><span class="id" title="variable">seen</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#box_type_deps"><span class="id" title="definition">box_type_deps</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#bt"><span class="id" title="variable">bt</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">KernameSet.empty</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">seen</span> <span class="id" title="var">bt</span> =&gt; <span class="id" title="definition">KernameSet.union</span> <a class="idref" href="ConCert.Extraction.Erasure.html#seen"><span class="id" title="variable">seen</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#box_type_deps"><span class="id" title="definition">box_type_deps</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#bt"><span class="id" title="variable">bt</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a>)) <a class="idref" href="ConCert.Extraction.Erasure.html#seen"><span class="id" title="variable">seen</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">seen</span> <span class="id" title="var">oib</span> =&gt; <span class="id" title="definition">KernameSet.union</span> <a class="idref" href="ConCert.Extraction.Erasure.html#seen"><span class="id" title="variable">seen</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#one_inductive_body_deps"><span class="id" title="variable">one_inductive_body_deps</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#oib"><span class="id" title="variable">oib</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mib</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">KernameSet.empty</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">nms</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) =&gt; <a class="idref" href="ConCert.Extraction.Erasure.html#box_type_deps"><span class="id" title="definition">box_type_deps</span></a> <span class="id" title="var">ty</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="definition">KernameSet.empty</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Erase&nbsp;the&nbsp;global&nbsp;declarations&nbsp;by&nbsp;the&nbsp;specified&nbsp;names&nbsp;and&nbsp;their<br/>
&nbsp;&nbsp;&nbsp;non-erased&nbsp;dependencies&nbsp;recursively.&nbsp;Ignore&nbsp;dependencies&nbsp;for&nbsp;which<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">ignore_deps</span></span>&nbsp;returnes&nbsp;<span class="inlinecode"><span class="id" title="var">true</span></span>&nbsp;*)</span><br/>
<span class="id" title="keyword">Program Fixpoint</span> <a name="erase_global_decls_deps_recursive"><span class="id" title="definition">erase_global_decls_deps_recursive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.Erasure.html#global_env"><span class="id" title="definition">P.global_env</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">wfΣ</span> : <span class="id" title="notation">∥</span><span class="id" title="class">wf</span> <a class="idref" href="ConCert.Extraction.Erasure.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a><span class="id" title="notation">∥</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">include</span> : <span class="id" title="definition">KernameSet.t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ignore_deps</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Erasure.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">Σ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Σext</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Erasure.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="definition">universes_decl_of_decl</span> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">KernameSet.mem</span> <span class="id" title="var">kn</span> <a class="idref" href="ConCert.Extraction.Erasure.html#include"><span class="id" title="variable">include</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;still&nbsp;erase&nbsp;ignored&nbsp;inductives&nbsp;and&nbsp;constants&nbsp;for&nbsp;two&nbsp;reasons:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;For&nbsp;inductives,&nbsp;we&nbsp;want&nbsp;to&nbsp;allow&nbsp;pattern&nbsp;matches&nbsp;on&nbsp;them&nbsp;and&nbsp;we&nbsp;need<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information&nbsp;about&nbsp;them&nbsp;to&nbsp;print&nbsp;names.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;For&nbsp;constants,&nbsp;we&nbsp;use&nbsp;their&nbsp;type&nbsp;to&nbsp;do&nbsp;deboxing.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">decl</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_global_decl"><span class="id" title="definition">erase_global_decl</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#f1da7e49fb083147c77c8d337cd7ffad"><span class="id" title="variable">Σext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">kn</span> <span class="id" title="var">decl</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">with_deps</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.Erasure.html#ignore_deps"><span class="id" title="variable">ignore_deps</span></a> <span class="id" title="var">kn</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_deps</span> := <span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Erasure.html#with_deps"><span class="id" title="variable">with_deps</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="ConCert.Extraction.Erasure.html#decl_deps"><span class="id" title="definition">decl_deps</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#decl"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">else</span> <span class="id" title="definition">KernameSet.empty</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Σer</span> := <a class="idref" href="ConCert.Extraction.Erasure.html#erase_global_decls_deps_recursive"><span class="id" title="definition">erase_global_decls_deps_recursive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">KernameSet.union</span> <a class="idref" href="ConCert.Extraction.Erasure.html#new_deps"><span class="id" title="variable">new_deps</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#include"><span class="id" title="variable">include</span></a>) <a class="idref" href="ConCert.Extraction.Erasure.html#ignore_deps"><span class="id" title="variable">ignore_deps</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#with_deps"><span class="id" title="variable">with_deps</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#decl"><span class="id" title="variable">decl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#7e4b4926bb3fdc27b560241672bdc966"><span class="id" title="variable">Σer</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Erasure.html#erase_global_decls_deps_recursive"><span class="id" title="definition">erase_global_decls_deps_recursive</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">_</span> <a class="idref" href="ConCert.Extraction.Erasure.html#include"><span class="id" title="variable">include</span></a> <a class="idref" href="ConCert.Extraction.Erasure.html#ignore_deps"><span class="id" title="variable">ignore_deps</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Solve</span> <span class="id" title="keyword">Obligations</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">subst</span>; <span class="id" title="var">sq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">wfΣ</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Erasure.html#EraseEnv"><span class="id" title="section">EraseEnv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="ConCert.Extraction.Erasure.html#is_logical"><span class="id" title="projection">is_logical</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="ConCert.Extraction.Erasure.html#conv_ar"><span class="id" title="projection">conv_ar</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="ConCert.Extraction.Erasure.html#is_sort"><span class="id" title="definition">is_sort</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="ConCert.Extraction.Erasure.html#is_arity"><span class="id" title="definition">is_arity</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="https://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
