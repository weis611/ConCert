<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="toc.html">Table of contents</a>
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc-header" class="toc-header">Contents:</div>
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc">
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Extraction.Optimize</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.ClosedAux.html#"><span class="id" title="library">ClosedAux</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.ExAst.html#"><span class="id" title="library">ExAst</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Transform.html#"><span class="id" title="library">Transform</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.ResultMonad.html#"><span class="id" title="library">ResultMonad</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Utils.html#"><span class="id" title="library">Utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">ELiftSubst</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="map_subterms"><span class="id" title="definition">map_subterms</span></a> (<span class="id" title="var">f</span> : <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">term</span>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tEvar</span> <span class="id" title="var">n</span> <span class="id" title="var">ts</span> =&gt; <span class="id" title="constructor">tEvar</span> <span class="id" title="var">n</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">na</span> <span class="id" title="var">body</span> =&gt; <span class="id" title="constructor">tLambda</span> <span class="id" title="var">na</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> =&gt; <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">na</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">val</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <span class="id" title="constructor">tApp</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">hd</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">arg</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCase</span> <span class="id" title="var">p</span> <span class="id" title="var">disc</span> <span class="id" title="var">brs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">tCase</span> <span class="id" title="var">p</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">disc</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">on_snd</span> <a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a>) <span class="id" title="var">brs</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProj</span> <span class="id" title="var">p</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="constructor">tProj</span> <span class="id" title="var">p</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tFix</span> <span class="id" title="var">def</span> <span class="id" title="var">i</span> =&gt; <span class="id" title="constructor">tFix</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">map_def</span> <a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a>) <span class="id" title="var">def</span>) <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCoFix</span> <span class="id" title="var">def</span> <span class="id" title="var">i</span> =&gt; <span class="id" title="constructor">tCoFix</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">map_def</span> <a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a>) <span class="id" title="var">def</span>) <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">t</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="bitmask"><span class="id" title="definition">bitmask</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="has_bit"><span class="id" title="definition">has_bit</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">bs</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="bitmask_not"><span class="id" title="definition">bitmask_not</span></a> (<span class="id" title="var">bs</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="count_zeros"><span class="id" title="definition">count_zeros</span></a> (<span class="id" title="var">bs</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="count_ones"><span class="id" title="definition">count_ones</span></a> (<span class="id" title="var">bs</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="bitmask_or"><span class="id" title="definition">bitmask_or</span></a> (<span class="id" title="var">bs1</span> <span class="id" title="var">bs2</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bs1"><span class="id" title="variable">bs1</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#bs2"><span class="id" title="variable">bs2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs1</span>, <span class="id" title="var">b2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs2</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <span class="id" title="var">b2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask_or"><span class="id" title="definition">bitmask_or</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs1"><span class="id" title="variable">bs1</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs2"><span class="id" title="variable">bs2</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="bitmask_and"><span class="id" title="definition">bitmask_and</span></a> (<span class="id" title="var">bs1</span> <span class="id" title="var">bs2</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bs1"><span class="id" title="variable">bs1</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#bs2"><span class="id" title="variable">bs2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs1</span>, <span class="id" title="var">b2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs2</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">(</span></a><span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="var">b2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask_and"><span class="id" title="definition">bitmask_and</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs1"><span class="id" title="variable">bs1</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs2"><span class="id" title="variable">bs2</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="trim_start"><span class="id" title="definition">trim_start</span></a> (<span class="id" title="var">b</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> <span class="id" title="var">bs</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Bool.Bool.html#eqb"><span class="id" title="definition">Bool.eqb</span></a> <span class="id" title="var">b'</span> <a class="idref" href="ConCert.Extraction.Optimize.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="trim_end"><span class="id" title="definition">trim_end</span></a> (<span class="id" title="var">b</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<span class="id" title="var">bs</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#trim_start"><span class="id" title="definition">trim_start</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#b"><span class="id" title="variable">b</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="dearg"><span class="id" title="section">dearg</span></a>.<br/>
<span class="id" title="keyword">Record</span> <a name="mib_masks"><span class="id" title="record">mib_masks</span></a> := {<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Bitmask&nbsp;specifying&nbsp;which&nbsp;parameters&nbsp;to&nbsp;remove&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="param_mask"><span class="id" title="projection">param_mask</span></a> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>;<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Bitmask&nbsp;specifying&nbsp;which&nbsp;**non-parameter**&nbsp;data&nbsp;to&nbsp;remove&nbsp;from<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;each&nbsp;constructor.&nbsp;The&nbsp;full&nbsp;mask&nbsp;used&nbsp;for&nbsp;each&nbsp;constructor&nbsp;is&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;concatenation&nbsp;of&nbsp;the&nbsp;param_mask&nbsp;and&nbsp;this&nbsp;mask&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="ctor_masks"><span class="id" title="projection">ctor_masks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>); }.<br/>

<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">ind_masks</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)).<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">const_masks</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Optimize.html#kn'"><span class="id" title="variable">kn'</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#dearg.ind_masks"><span class="id" title="variable">ind_masks</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="dearg_single"><span class="id" title="definition">dearg_single</span></a> (<span class="id" title="var">mask</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) (<span class="id" title="var">args</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> (<span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="var">arg</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="constructor">tLambda</span> <span class="id" title="constructor">nAnon</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> (<span class="id" title="abbreviation">lift0</span> 1 <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="constructor">tLambda</span> <span class="id" title="constructor">nAnon</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> (<span class="id" title="constructor">tApp</span> (<span class="id" title="abbreviation">lift0</span> 1 <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>) (<span class="id" title="constructor">tRel</span> 0)) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>, <span class="id" title="var">_</span> =&gt; <span class="id" title="definition">mkApps</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Get&nbsp;the&nbsp;branch&nbsp;for&nbsp;a&nbsp;branch&nbsp;of&nbsp;an&nbsp;inductive,&nbsp;i.e.&nbsp;without&nbsp;including&nbsp;parameters&nbsp;of&nbsp;the&nbsp;inductive&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> (<span class="id" title="var">mm</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#ind'"><span class="id" title="variable">ind'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="projection">inductive_ind</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#c'"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="var">mask</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Get&nbsp;mask&nbsp;for&nbsp;a&nbsp;constructor,&nbsp;i.e.&nbsp;combined&nbsp;parameter&nbsp;and&nbsp;branch&nbsp;mask&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="get_ctor_mask"><span class="id" title="definition">get_ctor_mask</span></a> (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<span class="id" title="projection">inductive_mind</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_const_mask"><span class="id" title="definition">get_const_mask</span></a> (<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#find"><span class="id" title="definition">find</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Optimize.html#kn'"><span class="id" title="variable">kn'</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#dearg.const_masks"><span class="id" title="variable">const_masks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="var">mask</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Remove&nbsp;lambda&nbsp;abstractions&nbsp;based&nbsp;on&nbsp;bitmask&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> (<span class="id" title="var">mask</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<span class="id" title="var">body</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> =&gt; <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">na</span> <span class="id" title="var">val</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">na</span> <span class="id" title="var">lam_body</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> =&gt; <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.Optimize.html#dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="var">lam_body</span><span class="id" title="notation">)</span> <span class="id" title="notation">{</span> 0 <span class="id" title="notation">:=</span> <span class="id" title="constructor">tBox</span> <span class="id" title="notation">}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> =&gt; <span class="id" title="constructor">tLambda</span> <span class="id" title="var">na</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="var">lam_body</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearged_npars"><span class="id" title="definition">dearged_npars</span></a> (<span class="id" title="var">mm</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<span class="id" title="var">npars</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#count_zeros"><span class="id" title="definition">count_zeros</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#npars"><span class="id" title="variable">npars</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_case_branch"><span class="id" title="definition">dearg_case_branch</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mm</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">br</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">×</span> <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">×</span> <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mask</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#br"><span class="id" title="variable">br</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#count_ones"><span class="id" title="definition">count_ones</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#br"><span class="id" title="variable">br</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_case_branches"><span class="id" title="definition">dearg_case_branches</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mm</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">brs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">×</span> <span class="id" title="inductive">term</span>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt; <span class="id" title="definition">mapi</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_case_branch"><span class="id" title="definition">dearg_case_branch</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearged_proj_arg"><span class="id" title="definition">dearged_proj_arg</span></a> (<span class="id" title="var">mm</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">arg</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt; <span class="id" title="keyword">let</span> <span class="id" title="var">mask</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> 0 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#arg"><span class="id" title="variable">arg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#count_ones"><span class="id" title="definition">count_ones</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#arg"><span class="id" title="variable">arg</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#arg"><span class="id" title="variable">arg</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_case"><span class="id" title="definition">dearg_case</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">npars</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">discr</span> : <span class="id" title="inductive">term</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">brs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">term</span>)) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mm</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<span class="id" title="projection">inductive_mind</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="constructor">tCase</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#dearged_npars"><span class="id" title="definition">dearged_npars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#npars"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#discr"><span class="id" title="variable">discr</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_case_branches"><span class="id" title="definition">dearg_case_branches</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_proj"><span class="id" title="definition">dearg_proj</span></a> (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">npars</span> <span class="id" title="var">arg</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">discr</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mm</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<span class="id" title="projection">inductive_mind</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="constructor">tProj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#dearged_npars"><span class="id" title="definition">dearged_npars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#npars"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#dearged_proj_arg"><span class="id" title="definition">dearged_proj_arg</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#arg"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#discr"><span class="id" title="variable">discr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="dearg_aux"><span class="id" title="definition">dearg_aux</span></a> (<span class="id" title="var">args</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">term</span>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a>) <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConstruct</span> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#get_ctor_mask"><span class="id" title="definition">get_ctor_mask</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCase</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">discr</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">discr</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">brs</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">on_snd</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) <span class="id" title="var">brs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">mkApps</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_case"><span class="id" title="definition">dearg_case</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <a class="idref" href="ConCert.Extraction.Optimize.html#discr"><span class="id" title="variable">discr</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">arg</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">mkApps</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_proj"><span class="id" title="definition">dearg_proj</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>)) <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">t</span> =&gt; <span class="id" title="definition">mkApps</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#map_subterms"><span class="id" title="definition">map_subterms</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg"><span class="id" title="definition">dearg</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="dearg_cst_type_top"><span class="id" title="definition">dearg_cst_type_top</span></a> (<span class="id" title="var">mask</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<span class="id" title="keyword">type</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#type"><span class="id" title="variable">type</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">cod</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_cst_type_top"><span class="id" title="definition">dearg_cst_type_top</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="var">cod</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">cod</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_cst_type_top"><span class="id" title="definition">dearg_cst_type_top</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#type"><span class="id" title="variable">type</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Remove&nbsp;lambda&nbsp;abstractions&nbsp;from&nbsp;top&nbsp;level&nbsp;declaration&nbsp;and&nbsp;remove<br/>
&nbsp;&nbsp;&nbsp;all&nbsp;unused&nbsp;args&nbsp;in&nbsp;applicacations&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_cst"><span class="id" title="definition">dearg_cst</span></a> (<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>) (<span class="id" title="var">cst</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mask</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_type</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">on_snd</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">dearg_cst_type_top</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">mask</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_type</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">option_map</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">dearg</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">∘</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">dearg_lambdas</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">mask</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">)</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="masked"><span class="id" title="definition">masked</span></a> {<span class="id" title="var">X</span>} (<span class="id" title="var">mask</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#xs"><span class="id" title="variable">xs</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">b</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#masked"><span class="id" title="definition">masked</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#xs"><span class="id" title="variable">xs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt; <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#masked"><span class="id" title="definition">masked</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#xs"><span class="id" title="variable">xs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_oib"><span class="id" title="definition">dearg_oib</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mib_masks</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">oib_index</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">oib</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_name</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_name</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_propositional</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_propositional</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_kelim</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_kelim</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_type_vars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_type_vars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">mapi</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">fun</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">c</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">'(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">name</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">fields</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">let</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ctor_mask</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">match</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">find</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">fun</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">'(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind'</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">c'</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">_</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind'</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">=?</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib_index</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">c'</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">=?</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">c</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">mib_masks</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">|</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">_</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">_</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">mask</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">mask</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">|</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">None</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">=&gt;</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">end</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">name</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">masked</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">mib_masks</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">++</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ctor_mask</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">fields</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctor_original_arities</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctor_original_arities</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_projs</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_projs</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_mib"><span class="id" title="definition">dearg_mib</span></a> (<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>) (<span class="id" title="var">mib</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mib_masks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_npars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">count_zeros</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">mib_masks</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_bodies</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">mapi</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">dearg_oib</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">mib_masks</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_bodies</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">mib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">)</span></a> |}<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#mib"><span class="id" title="variable">mib</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_decl"><span class="id" title="definition">dearg_decl</span></a> (<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>) (<span class="id" title="var">decl</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#decl"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_cst"><span class="id" title="definition">dearg_cst</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="var">cst</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_mib"><span class="id" title="definition">dearg_mib</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="var">mib</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#decl"><span class="id" title="variable">decl</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_env"><span class="id" title="definition">dearg_env</span></a> (<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">has_deps</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#has_deps"><span class="id" title="variable">has_deps</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_decl"><span class="id" title="definition">dearg_decl</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#decl"><span class="id" title="variable">decl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Validity&nbsp;checks&nbsp;used&nbsp;when&nbsp;invoking&nbsp;the&nbsp;pass&nbsp;and&nbsp;to&nbsp;prove&nbsp;it&nbsp;correct&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="is_dead"><span class="id" title="definition">is_dead</span></a> (<span class="id" title="var">rel</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tRel</span> <span class="id" title="var">i</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tEvar</span> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">ts</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">_</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a> <span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a> <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCase</span> <span class="id" title="var">_</span> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a> <span class="id" title="var">discr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a> <span class="id" title="notation">∘</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="var">brs</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProj</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCoFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> (<span class="id" title="notation">#|</span><span class="id" title="var">defs</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#rel"><span class="id" title="variable">rel</span></a>) <span class="id" title="notation">∘</span> <span class="id" title="projection">dbody</span>) <span class="id" title="var">defs</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> (<span class="id" title="var">mask</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<span class="id" title="var">body</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">_</span> <span class="id" title="var">body</span>, <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> <a class="idref" href="ConCert.Extraction.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> 0 <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#body"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="valid_case_masks"><span class="id" title="definition">valid_case_masks</span></a> (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">npars</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">brs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">term</span>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<span class="id" title="projection">inductive_mind</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#npars"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">alli</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ar</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">br</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ar"><span class="id" title="variable">ar</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#br"><span class="id" title="variable">br</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a> 0<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="valid_proj"><span class="id" title="definition">valid_proj</span></a> (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) (<span class="id" title="var">npars</span> <span class="id" title="var">arg</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<span class="id" title="projection">inductive_mind</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#npars"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Projected&nbsp;argument&nbsp;must&nbsp;not&nbsp;be&nbsp;removed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#arg"><span class="id" title="variable">arg</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> 0) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Check&nbsp;that&nbsp;all&nbsp;case&nbsp;and&nbsp;projections&nbsp;in&nbsp;a&nbsp;term&nbsp;are&nbsp;valid&nbsp;according<br/>
&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;masks.&nbsp;They&nbsp;must&nbsp;have&nbsp;the&nbsp;proper&nbsp;number&nbsp;of&nbsp;parameters,&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;1.&nbsp;For&nbsp;cases,&nbsp;their&nbsp;branches&nbsp;must&nbsp;be&nbsp;compatible&nbsp;with&nbsp;the&nbsp;masks,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i.e.&nbsp;they&nbsp;are&nbsp;iterated&nbsp;lambdas/let-ins&nbsp;and&nbsp;when&nbsp;"true"&nbsp;appears&nbsp;in&nbsp;the&nbsp;mask,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;parameter&nbsp;is&nbsp;unused<br/>
&nbsp;&nbsp;&nbsp;2.&nbsp;For&nbsp;projections,&nbsp;the&nbsp;projected&nbsp;argument&nbsp;must&nbsp;not&nbsp;be&nbsp;removed&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="valid_cases"><span class="id" title="definition">valid_cases</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tEvar</span> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">ts</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">_</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCase</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">discr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="notation">∘</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="var">brs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_case_masks"><span class="id" title="definition">valid_case_masks</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">brs</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">arg</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">t</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_proj"><span class="id" title="definition">valid_proj</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCoFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span>  =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="notation">∘</span> <span class="id" title="projection">dbody</span>) <span class="id" title="var">defs</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="valid_masks_decl"><span class="id" title="definition">valid_masks_decl</span></a> (<span class="id" title="var">p</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">{|</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">|}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span>) <span class="id" title="var">body</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">typ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Proposition&nbsp;representing&nbsp;whether&nbsp;masks&nbsp;are&nbsp;valid&nbsp;for&nbsp;entire&nbsp;environment.<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;prove&nbsp;that&nbsp;our&nbsp;analysis&nbsp;produces&nbsp;masks&nbsp;that&nbsp;satisfy&nbsp;this<br/>
&nbsp;&nbsp;&nbsp;predicate.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="valid_masks_env"><span class="id" title="definition">valid_masks_env</span></a> (<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#valid_masks_decl"><span class="id" title="definition">valid_masks_decl</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Check&nbsp;if&nbsp;all&nbsp;applications&nbsp;are&nbsp;applied&nbsp;enough&nbsp;to&nbsp;be&nbsp;deboxed&nbsp;without&nbsp;eta&nbsp;expansion&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> (<span class="id" title="var">nargs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tBox</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tRel</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tVar</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tEvar</span> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0) <span class="id" title="var">ts</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">_</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#nargs"><span class="id" title="variable">nargs</span></a>) <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#nargs"><span class="id" title="variable">nargs</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConstruct</span> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> =&gt; <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#get_ctor_mask"><span class="id" title="definition">get_ctor_mask</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#nargs"><span class="id" title="variable">nargs</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCase</span> <span class="id" title="var">_</span> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">discr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="notation">∘</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="var">brs</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProj</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCoFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="notation">∘</span> <span class="id" title="projection">dbody</span>) <span class="id" title="var">defs</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tPrim</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Check&nbsp;if&nbsp;all&nbsp;applications&nbsp;are&nbsp;applied&nbsp;enough&nbsp;to&nbsp;be&nbsp;deboxed&nbsp;without&nbsp;eta&nbsp;expansion&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="is_expanded"><span class="id" title="definition">is_expanded</span></a> (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Like&nbsp;above,&nbsp;but&nbsp;check&nbsp;all&nbsp;bodies&nbsp;in&nbsp;environment.&nbsp;This&nbsp;assumption&nbsp;does&nbsp;not&nbsp;necessarily&nbsp;hold,<br/>
&nbsp;&nbsp;&nbsp;but&nbsp;we&nbsp;should&nbsp;try&nbsp;to&nbsp;make&nbsp;it&nbsp;hold&nbsp;by&nbsp;eta&nbsp;expansion&nbsp;before&nbsp;quoting&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="is_expanded_env"><span class="id" title="definition">is_expanded_env</span></a> (<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#decl"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">{|</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">|}</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded"><span class="id" title="definition">is_expanded</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Optimize.html#dearg"><span class="id" title="section">dearg</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="dearg_types"><span class="id" title="section">dearg_types</span></a>.<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="keep_tvar"><span class="id" title="definition">keep_tvar</span></a> <span class="id" title="var">tvar</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#tvar_is_arity"><span class="id" title="projection">tvar_is_arity</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#tvar"><span class="id" title="variable">tvar</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#tvar_is_logical"><span class="id" title="projection">tvar_is_logical</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#tvar"><span class="id" title="variable">tvar</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> (<span class="id" title="var">tvars</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a>) (<span class="id" title="var">t</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) (<span class="id" title="var">args</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#tvars"><span class="id" title="variable">tvars</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">tvar</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">tvars</span>, <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> <span class="id" title="var">tvar</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#tvars"><span class="id" title="variable">tvars</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="var">arg</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#tvars"><span class="id" title="variable">tvars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#mkTApps"><span class="id" title="definition">mkTApps</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_inductive_tvars"><span class="id" title="definition">get_inductive_tvars</span></a> (<span class="id" title="var">ind</span> : <span class="id" title="record">inductive</span>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.ExAst.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#43d636544fdb72d248c91416b027cea2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">oib</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> <span class="id" title="var">oib</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> (<span class="id" title="var">args</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) (<span class="id" title="var">bt</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">codom</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">dom</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">codom</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">ty1</span> <span class="id" title="var">ty2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ty2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a>) <span class="id" title="var">ty1</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#get_inductive_tvars"><span class="id" title="definition">get_inductive_tvars</span></a> <span class="id" title="var">ind</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TConst"><span class="id" title="constructor">TConst</span></a> <span class="id" title="var">kn</span> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.ExAst.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#43d636544fdb72d248c91416b027cea2"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">kn</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">vs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> <span class="id" title="var">vs</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#mkTApps"><span class="id" title="definition">mkTApps</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="debox_box_type"><span class="id" title="definition">debox_box_type</span></a> (<span class="id" title="var">bt</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="debox_type_constant"><span class="id" title="definition">debox_type_constant</span></a> (<span class="id" title="var">cst</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_type</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">on_snd</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">debox_box_type</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_type</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst_body</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">cst</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_constant_body"><span class="id" title="constructor">;</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="reindex"><span class="id" title="definition">reindex</span></a> (<span class="id" title="var">tvars</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> (<span class="id" title="var">bt</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">cod</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">dom</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">hd</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">arg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <span class="id" title="var">i</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <span class="id" title="notation">#|</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#firstn"><span class="id" title="definition">firstn</span></a> <span class="id" title="var">i</span> <a class="idref" href="ConCert.Extraction.Optimize.html#tvars"><span class="id" title="variable">tvars</span></a>)<span class="id" title="notation">|</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="debox_type_oib"><span class="id" title="definition">debox_type_oib</span></a> (<span class="id" title="var">oib</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">debox</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#reindex"><span class="id" title="definition">reindex</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#oib"><span class="id" title="variable">oib</span></a>) <span class="id" title="notation">∘</span> <a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type"><span class="id" title="definition">debox_box_type</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_name</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_name</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_propositional</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_propositional</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_kelim</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_kelim</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_type_vars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">filter</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">keep_tvar</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_type_vars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">map</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">on_snd</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">map</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">on_snd</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">debox</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)))</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctor_original_arities</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_ctor_original_arities</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_projs</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">map</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">on_snd</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">debox</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">)</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">ind_projs</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">oib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_one_inductive_body"><span class="id" title="constructor">);</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="debox_type_mib"><span class="id" title="definition">debox_type_mib</span></a> (<span class="id" title="var">mib</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_npars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_npars</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">mib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_bodies</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">map</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">debox_type_oib</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">ind_bodies</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">mib</span></a><a class="idref" href="ConCert.Extraction.ExAst.html#Build_mutual_inductive_body"><span class="id" title="constructor">)</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="debox_type_decl"><span class="id" title="definition">debox_type_decl</span></a> (<span class="id" title="var">decl</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#decl"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_type_constant"><span class="id" title="definition">debox_type_constant</span></a> <span class="id" title="var">cst</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_type_mib"><span class="id" title="definition">debox_type_mib</span></a> <span class="id" title="var">mib</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">ta</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">ta</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ty_vars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> <span class="id" title="var">ty_vars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#reindex"><span class="id" title="definition">reindex</span></a> <span class="id" title="var">ty_vars</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_box_type"><span class="id" title="definition">debox_box_type</span></a> <span class="id" title="var">ty</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_types"><span class="id" title="section">dearg_types</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="debox_env_types"><span class="id" title="definition">debox_env_types</span></a> (<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">on_snd</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_type_decl"><span class="id" title="definition">debox_type_decl</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="clear_bit"><span class="id" title="definition">clear_bit</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">bs</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0, <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>, <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span> =&gt; <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bs"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Pair&nbsp;of&nbsp;bitmask&nbsp;and&nbsp;inductive&nbsp;masks.<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;first&nbsp;projection&nbsp;is&nbsp;a&nbsp;bitmask&nbsp;of&nbsp;dead&nbsp;local&nbsp;variables,&nbsp;i.e.&nbsp;when&nbsp;a&nbsp;use&nbsp;is&nbsp;found,<br/>
&nbsp;&nbsp;&nbsp;a&nbsp;bit&nbsp;in&nbsp;this&nbsp;is&nbsp;set&nbsp;to&nbsp;false.<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;second&nbsp;projection&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;dead&nbsp;constructor&nbsp;datas.&nbsp;When&nbsp;a&nbsp;use&nbsp;of&nbsp;a&nbsp;constructor<br/>
&nbsp;&nbsp;&nbsp;parameter&nbsp;is&nbsp;found,&nbsp;this&nbsp;is&nbsp;set&nbsp;to&nbsp;false.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="analyze_state"><span class="id" title="definition">analyze_state</span></a> := <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="set_used"><span class="id" title="definition">set_used</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="new_vars"><span class="id" title="definition">new_vars</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#repeat"><span class="id" title="definition">List.repeat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="new_var"><span class="id" title="definition">new_var</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="remove_vars"><span class="id" title="definition">remove_vars</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="remove_var"><span class="id" title="definition">remove_var</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#tl"><span class="id" title="definition">tl</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="update_mib_masks"><span class="id" title="definition">update_mib_masks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mm</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">update_list</span> <span class="id" title="var">l</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mm'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">eq_kername</span> <span class="id" title="var">kn'</span> <a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#kn"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#l"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mm'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#update_list"><span class="id" title="variable">update_list</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#l"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#update_list"><span class="id" title="variable">update_list</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">.2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="update_ind_ctor_mask"><span class="id" title="definition">update_ind_ctor_mask</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ind</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctor_masks</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="variable">ctor_masks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">ctor_masks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">(</span></a><span class="id" title="var">c'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">mask'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="variable">ctor_masks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#update_ind_ctor_mask"><span class="id" title="definition">update_ind_ctor_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="variable">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fold_lefti"><span class="id" title="definition">fold_lefti</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">fold_lefti</span> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#B"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">a0</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#a0"><span class="id" title="variable">a0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#fold_lefti"><span class="id" title="variable">fold_lefti</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a>) <span class="id" title="var">t</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#a0"><span class="id" title="variable">a0</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="AnalyzeTop"><span class="id" title="section">AnalyzeTop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">analyze</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Analyze&nbsp;iterated&nbsp;let-in&nbsp;and&nbsp;lambdas&nbsp;to&nbsp;find&nbsp;dead&nbsp;variables&nbsp;inside&nbsp;body.<br/>
&nbsp;&nbsp;&nbsp;Return&nbsp;bitmask&nbsp;of&nbsp;max&nbsp;length&nbsp;n&nbsp;indicating&nbsp;which&nbsp;lambda&nbsp;arguments&nbsp;are&nbsp;unused.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">state</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">max_lams</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">t</span>} : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a>, <a class="idref" href="ConCert.Extraction.Optimize.html#max_lams"><span class="id" title="variable">max_lams</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span>, <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">state</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#AnalyzeTop.analyze"><span class="id" title="variable">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="var">val</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">mask</span>, <span class="id" title="var">state</span>) := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#max_lams"><span class="id" title="variable">max_lams</span></a> <span class="id" title="var">body</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Add&nbsp;nothing&nbsp;to&nbsp;mask&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">na</span> <span class="id" title="var">body</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">max_lams</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">mask</span>, <span class="id" title="var">state</span>) := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#max_lams"><span class="id" title="variable">max_lams</span></a> <span class="id" title="var">body</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Add&nbsp;to&nbsp;mask&nbsp;indicating&nbsp;whether&nbsp;this&nbsp;arg&nbsp;is&nbsp;unused&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#hd"><span class="id" title="definition">hd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">t</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#AnalyzeTop.analyze"><span class="id" title="variable">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.Optimize.html#AnalyzeTop"><span class="id" title="section">AnalyzeTop</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="analyze"><span class="id" title="definition">analyze</span></a> (<span class="id" title="var">state</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">t</span>} : <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tBox</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tRel</span> <span class="id" title="var">i</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#set_used"><span class="id" title="definition">set_used</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tVar</span> <span class="id" title="var">n</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tEvar</span> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <span class="id" title="var">ts</span> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLambda</span> <span class="id" title="var">_</span> <span class="id" title="var">cod</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a>) <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tLetIn</span> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="var">val</span>)) <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="var">hd</span>) <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tConstruct</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCase</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">state</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="var">discr</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><span class="id" title="notation">.2</span> (<span class="id" title="projection">inductive_mind</span> <span class="id" title="var">ind</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">analyze_case</span> <span class="id" title="var">c</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">state</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctor_masks</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">brs</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">mask</span>, <span class="id" title="var">state</span>) := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a><span class="id" title="notation">.1</span> <a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a><span class="id" title="notation">.2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;mask&nbsp;is&nbsp;too&nbsp;short&nbsp;it&nbsp;means&nbsp;the&nbsp;branch&nbsp;is&nbsp;not&nbsp;an&nbsp;iterated&nbsp;lambda.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;this&nbsp;case&nbsp;we&nbsp;cannot&nbsp;know&nbsp;if&nbsp;the&nbsp;remaining&nbsp;args&nbsp;are&nbsp;dead,&nbsp;so&nbsp;pad<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;0's&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mask</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#repeat"><span class="id" title="definition">List.repeat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#brs"><span class="id" title="variable">brs</span></a><span class="id" title="notation">.1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <span class="id" title="notation">#|</span><a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a><span class="id" title="notation">|</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#update_ind_ctor_mask"><span class="id" title="definition">update_ind_ctor_mask</span></a> (<span class="id" title="projection">inductive_ind</span> <span class="id" title="var">ind</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="variable">ctor_masks</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#bitmask_and"><span class="id" title="definition">bitmask_and</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">state</span>, <span class="id" title="var">ctor_masks</span>) := <a class="idref" href="ConCert.Extraction.Optimize.html#fold_lefti"><span class="id" title="definition">fold_lefti</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_case"><span class="id" title="variable">analyze_case</span></a> 0 <span class="id" title="var">brs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <span class="id" title="var">mm</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mm</span> := {| <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">mm</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#update_mib_masks"><span class="id" title="definition">update_mib_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> (<span class="id" title="projection">inductive_mind</span> <span class="id" title="var">ind</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tProj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">arg</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">state</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><span class="id" title="notation">.2</span> (<span class="id" title="projection">inductive_mind</span> <span class="id" title="var">ind</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctor_masks</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#update_ind_ctor_mask"><span class="id" title="definition">update_ind_ctor_mask</span></a> (<span class="id" title="projection">inductive_ind</span> <span class="id" title="var">ind</span>) 0 (<a class="idref" href="ConCert.Extraction.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <span class="id" title="var">mm</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> <span class="id" title="var">arg</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mm</span> := {| <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">mm</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#update_mib_masks"><span class="id" title="definition">update_mib_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> (<span class="id" title="projection">inductive_mind</span> <span class="id" title="var">ind</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tCoFix</span> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">state</span> := <a class="idref" href="ConCert.Extraction.Optimize.html#new_vars"><span class="id" title="definition">new_vars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="notation">#|</span><span class="id" title="var">defs</span><span class="id" title="notation">|</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">state</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">state</span> <span class="id" title="var">d</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> (<span class="id" title="projection">dbody</span> <a class="idref" href="ConCert.Extraction.Optimize.html#d"><span class="id" title="variable">d</span></a>)) <span class="id" title="var">defs</span> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#remove_vars"><span class="id" title="definition">remove_vars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a> <span class="id" title="notation">#|</span><span class="id" title="var">defs</span><span class="id" title="notation">|</span><br/>
&nbsp;&nbsp;| <span class="id" title="constructor">tPrim</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#state"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="decompose_TArr"><span class="id" title="definition">decompose_TArr</span></a> (<span class="id" title="var">bt</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">cod</span> =&gt; <a class="idref" href="ConCert.Extraction.Utils.html#map_fst"><span class="id" title="definition">map_fst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">dom</span>) (<a class="idref" href="ConCert.Extraction.Optimize.html#decompose_TArr"><span class="id" title="definition">decompose_TArr</span></a> <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> (<span class="id" title="var">bt</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bt"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="analyze_constant"><span class="id" title="definition">analyze_constant</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">cst</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">inds</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)) : <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">doms</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">codom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.Optimize.html#decompose_TArr"><span class="id" title="definition">decompose_TArr</span></a> <span class="id" title="notation">(</span><a class="idref" href="ConCert.Extraction.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#cst"><span class="id" title="variable">cst</span></a><span class="id" title="notation">).2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#cst"><span class="id" title="variable">cst</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">max_lams</span> := <span class="id" title="notation">#|</span><span class="id" title="var">doms</span><span class="id" title="notation">|</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">inds</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#max_lams"><span class="id" title="variable">max_lams</span></a> <span class="id" title="var">body</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;if&nbsp;all&nbsp;the&nbsp;arguments&nbsp;are&nbsp;logical,&nbsp;we&nbsp;keep&nbsp;the&nbsp;first&nbsp;one&nbsp;in&nbsp;order&nbsp;to&nbsp;prevent&nbsp;contstans&nbsp;like&nbsp;<span class="inlinecode"><span class="id" title="var">false_rect</span></span>&nbsp;to&nbsp;be&nbsp;evaluated&nbsp;eagerly&nbsp;in&nbsp;the&nbsp;extracted&nbsp;code&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> <span class="id" title="var">doms</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> 0 <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> <span class="id" title="var">doms</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a name="dearg_set"><span class="id" title="record">dearg_set</span></a> := {<br/>
&nbsp;&nbsp;<a name="const_masks"><span class="id" title="projection">const_masks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>);<br/>
&nbsp;&nbsp;<a name="ind_masks"><span class="id" title="projection">ind_masks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>); }.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="analyze_env"><span class="id" title="definition">analyze_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">overridden_masks</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Σ</span> : <a class="idref" href="ConCert.Extraction.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_set"><span class="id" title="record">dearg_set</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; {| <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">const_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">[];</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">ind_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">[]</span></a> |}<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">has_deps</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">Σ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">consts</span>, <span class="id" title="var">inds</span>) := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_env"><span class="id" title="definition">analyze_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#overridden_masks"><span class="id" title="variable">overridden_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">consts</span>, <span class="id" title="var">inds</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">decl</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">inds</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_constant"><span class="id" title="definition">analyze_constant</span></a> <span class="id" title="var">cst</span> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mask</span> := <span class="id" title="definition">option_get</span> <span class="id" title="var">mask</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#overridden_masks"><span class="id" title="variable">overridden_masks</span></a> <span class="id" title="var">kn</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#consts"><span class="id" title="variable">consts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctor_masks</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#concat"><span class="id" title="definition">List.concat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">mapi</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ind</span> <span class="id" title="var">oib</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">mapi</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> <span class="id" title="notation">∘</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mib</span>) <a class="idref" href="ConCert.Extraction.Optimize.html#args"><span class="id" title="variable">args</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#oib"><span class="id" title="variable">oib</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Extraction.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mib</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mm</span> := {| <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">List.repeat</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">true</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ind_npars</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">mib</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#consts"><span class="id" title="variable">consts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mm"><span class="id" title="variable">mm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Extraction.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#consts"><span class="id" title="variable">consts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#inds"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">const_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">consts</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">ind_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_dearg_set"><span class="id" title="constructor">inds</span></a> |}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Remove&nbsp;trailing&nbsp;"false"&nbsp;bits&nbsp;in&nbsp;masks&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="trim_const_masks"><span class="id" title="definition">trim_const_masks</span></a> (<span class="id" title="var">cm</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">on_snd</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#trim_end"><span class="id" title="definition">trim_end</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)) <a class="idref" href="ConCert.Extraction.Optimize.html#cm"><span class="id" title="variable">cm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="trim_ctor_masks"><span class="id" title="definition">trim_ctor_masks</span></a> (<span class="id" title="var">cm</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="notation">×</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#ind"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#trim_end"><span class="id" title="definition">trim_end</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#mask"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#cm"><span class="id" title="variable">cm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="trim_mib_masks"><span class="id" title="definition">trim_mib_masks</span></a> (<span class="id" title="var">mm</span> : <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">param_mask</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">mm</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">trim_ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">(</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">ctor_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">mm</span></a><a class="idref" href="ConCert.Extraction.Optimize.html#Build_mib_masks"><span class="id" title="constructor">)</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="trim_ind_masks"><span class="id" title="definition">trim_ind_masks</span></a> (<span class="id" title="var">im</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="definition">kername</span> <span class="id" title="notation">×</span> <a class="idref" href="ConCert.Extraction.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="definition">on_snd</span> <a class="idref" href="ConCert.Extraction.Optimize.html#trim_mib_masks"><span class="id" title="definition">trim_mib_masks</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#im"><span class="id" title="variable">im</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dearg_transform"><span class="id" title="definition">dearg_transform</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">overridden_masks</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;true,&nbsp;trim&nbsp;ends&nbsp;of&nbsp;constant&nbsp;masks&nbsp;to&nbsp;avoid&nbsp;unnecessary&nbsp;eta&nbsp;expansion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">do_trim_const_masks</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;true,&nbsp;trim&nbsp;ends&nbsp;of&nbsp;constructor&nbsp;masks&nbsp;to&nbsp;avoid&nbsp;unnecessary&nbsp;eta&nbsp;expansion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">do_trim_ctor_masks</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Check&nbsp;if&nbsp;erased&nbsp;environment&nbsp;is&nbsp;closed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">check_closed</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Check&nbsp;that&nbsp;environment&nbsp;is&nbsp;expanded&nbsp;enough&nbsp;before&nbsp;dearging&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">check_expanded</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Check&nbsp;that&nbsp;the&nbsp;dearg&nbsp;masks&nbsp;generated&nbsp;by&nbsp;analysis&nbsp;are&nbsp;valid&nbsp;for&nbsp;dearging&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">check_valid_masks</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="ConCert.Extraction.Transform.html#ExtractTransform"><span class="id" title="definition">ExtractTransform</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">Σ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Optimize.html#check_closed"><span class="id" title="variable">check_closed</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.ClosedAux.html#env_closed"><span class="id" title="definition">env_closed</span></a> (<a class="idref" href="ConCert.Extraction.ExAst.html#trans_env"><span class="id" title="definition">trans_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>)) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> "Erased environment is not closed"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><span class="id" title="notation">);;</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">const_masks</span>, <span class="id" title="var">ind_masks</span>) := <a class="idref" href="ConCert.Extraction.Utils.html#timed"><span class="id" title="definition">timed</span></a> "Dearg analysis"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#analyze_env"><span class="id" title="definition">analyze_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#overridden_masks"><span class="id" title="variable">overridden_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>) <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">const_masks</span> := (<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Optimize.html#do_trim_const_masks"><span class="id" title="variable">do_trim_const_masks</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="ConCert.Extraction.Optimize.html#trim_const_masks"><span class="id" title="definition">trim_const_masks</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#const_masks"><span class="id" title="variable">const_masks</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ind_masks</span> := (<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Optimize.html#do_trim_ctor_masks"><span class="id" title="variable">do_trim_ctor_masks</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="ConCert.Extraction.Optimize.html#trim_ind_masks"><span class="id" title="definition">trim_ind_masks</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="ConCert.Extraction.Optimize.html#ind_masks"><span class="id" title="variable">ind_masks</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Optimize.html#check_expanded"><span class="id" title="variable">check_expanded</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#is_expanded_env"><span class="id" title="definition">is_expanded_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind_masks"><span class="id" title="variable">ind_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#const_masks"><span class="id" title="variable">const_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> "Erased environment is not expanded enough for dearging to be provably correct"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><span class="id" title="notation">);;</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.Optimize.html#check_valid_masks"><span class="id" title="variable">check_valid_masks</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.Optimize.html#valid_masks_env"><span class="id" title="definition">valid_masks_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind_masks"><span class="id" title="variable">ind_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#const_masks"><span class="id" title="variable">const_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> "Analysis produced masks that ask to remove live arguments"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><span class="id" title="notation">);;</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">ret</span> (<a class="idref" href="ConCert.Extraction.Optimize.html#debox_env_types"><span class="id" title="definition">debox_env_types</span></a> (<a class="idref" href="ConCert.Extraction.Utils.html#timed"><span class="id" title="definition">timed</span></a> "Dearging" (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.Optimize.html#dearg_env"><span class="id" title="definition">dearg_env</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#ind_masks"><span class="id" title="variable">ind_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#const_masks"><span class="id" title="variable">const_masks</span></a> <a class="idref" href="ConCert.Extraction.Optimize.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>))).<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="https://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
