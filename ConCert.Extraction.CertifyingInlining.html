<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="toc.html">Table of contents</a>
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc-header" class="toc-header">Contents:</div>
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc">
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Extraction.CertifyingInlining</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab322"></a><h1 class="section">Inlining pass on the Template Coq representation</h1>

<div class="paragraph"> </div>

 Essentially, just an adaptaion of the inlining pass on the erased representation.
 After the pass is applied we generate proofs that the original and the transformed terms are equal in the theory of Coq. The proofs are just by <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a></span>, since the terms are convertible 
</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Transform.html#"><span class="id" title="library">Transform</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Common.html#"><span class="id" title="library">Common</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.CertifyingBeta.html#"><span class="id" title="library">CertifyingBeta</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.ResultMonad.html#"><span class="id" title="library">ResultMonad</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Utils.html#"><span class="id" title="library">Utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Extraction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Extraction.Certifying.html#"><span class="id" title="library">Certifying</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <a class="idref" href="ConCert.Extraction.Common.html#to_kername"><span class="id" title="definition">Import</span></a> <span class="id" title="library">All</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Kernames</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotation</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="inlining"><span class="id" title="section">inlining</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">should_inline</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">Σ</span> : <span class="id" title="definition">global_env</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inline_const"><span class="id" title="definition">inline_const</span></a> (<span class="id" title="var">kn</span> : <span class="id" title="definition">kername</span>) (<span class="id" title="var">u</span> : <span class="id" title="definition">Instance.t</span>) (<span class="id" title="var">args</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">const</span> := <span class="id" title="constructor">tConst</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#u"><span class="id" title="variable">u</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">lookup_env</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#1b0fae7f9b6290849ff7c3ac38c2ca0b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="constructor">ConstantDecl</span> <span class="id" title="var">cst</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="projection">cst_body</span> <span class="id" title="var">cst</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> <span class="comment">(*&nbsp;once&nbsp;told&nbsp;me&nbsp;*)</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Often&nbsp;the&nbsp;first&nbsp;beta&nbsp;will&nbsp;expose&nbsp;an&nbsp;iota&nbsp;(record&nbsp;projection),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;projected&nbsp;field&nbsp;is&nbsp;often&nbsp;a&nbsp;function,&nbsp;so&nbsp;we&nbsp;do&nbsp;another&nbsp;beta&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">hd</span>, <span class="id" title="var">args</span>) := <span class="id" title="definition">decompose_app</span> (<a class="idref" href="ConCert.Extraction.Common.html#beta_body"><span class="id" title="definition">beta_body</span></a> <span class="id" title="var">body</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Common.html#beta_body"><span class="id" title="definition">beta_body</span></a> (<a class="idref" href="ConCert.Extraction.Common.html#iota_body"><span class="id" title="definition">iota_body</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#hd"><span class="id" title="variable">hd</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#const"><span class="id" title="variable">const</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="constructor">tApp</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#const"><span class="id" title="variable">const</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="inline_aux"><span class="id" title="definition">inline_aux</span></a> (<span class="id" title="var">args</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">term</span>) (<span class="id" title="var">t</span> : <span class="id" title="inductive">term</span>) : <span class="id" title="inductive">term</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tApp</span> <span class="id" title="var">hd</span> <span class="id" title="var">args0</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_aux"><span class="id" title="definition">inline_aux</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_aux"><span class="id" title="definition">inline_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="var">args0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a>) <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tCast</span> <span class="id" title="var">t0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;removing&nbsp;casts&nbsp;leads&nbsp;to&nbsp;producing&nbsp;more&nbsp;definitions&nbsp;at&nbsp;the&nbsp;proof<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generation&nbsp;phase,&nbsp;even&nbsp;for&nbsp;the&nbsp;cases&nbsp;when&nbsp;there&nbsp;isn't&nbsp;anything&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inline,&nbsp;because&nbsp;the&nbsp;structure&nbsp;of&nbsp;the&nbsp;term&nbsp;has&nbsp;changed.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;cannot&nbsp;determine&nbsp;at&nbsp;this&nbsp;point&nbsp;if&nbsp;we&nbsp;should&nbsp;inline&nbsp;something&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nothing&nbsp;at&nbsp;all,&nbsp;since&nbsp;<span class="inlinecode"><span class="id" title="var">should_inline</span></span>&nbsp;is&nbsp;a&nbsp;function*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_aux"><span class="id" title="definition">inline_aux</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a> <span class="id" title="var">t0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> <span class="id" title="var">u</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inlining.should_inline"><span class="id" title="variable">should_inline</span></a> <span class="id" title="var">kn</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">lookup_env</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#1b0fae7f9b6290849ff7c3ac38c2ca0b"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">kn</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="constructor">ConstantDecl</span> <span class="id" title="var">cst</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="projection">cst_body</span> <span class="id" title="var">cst</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> <span class="comment">(*&nbsp;once&nbsp;told&nbsp;me&nbsp;*)</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">hd</span>, <span class="id" title="var">args</span>) := <span class="id" title="definition">decompose_app</span> (<a class="idref" href="ConCert.Extraction.Common.html#beta_body"><span class="id" title="definition">beta_body</span></a> <span class="id" title="var">body</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;Often&nbsp;the&nbsp;first&nbsp;beta&nbsp;will&nbsp;expose&nbsp;an&nbsp;iota&nbsp;(record&nbsp;projection),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;projected&nbsp;field&nbsp;is&nbsp;often&nbsp;a&nbsp;function,&nbsp;so&nbsp;we&nbsp;do&nbsp;another&nbsp;beta&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">res</span> := <a class="idref" href="ConCert.Extraction.Common.html#beta_body"><span class="id" title="definition">beta_body</span></a> (<a class="idref" href="ConCert.Extraction.Common.html#iota_body"><span class="id" title="definition">iota_body</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#hd"><span class="id" title="variable">hd</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;after&nbsp;we&nbsp;beta-reduced&nbsp;the&nbsp;function&nbsp;coming&nbsp;from&nbsp;projection,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;might&nbsp;intorduce&nbsp;new&nbsp;redexes.&nbsp;This&nbsp;is&nbsp;often&nbsp;the&nbsp;case&nbsp;when&nbsp;using<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;monads.&nbsp;Therefore,&nbsp;we&nbsp;do&nbsp;a&nbsp;pass&nbsp;that&nbsp;find&nbsp;the&nbsp;redexes&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beta-reduces&nbsp;them&nbsp;further.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CertifyingBeta.html#betared"><span class="id" title="definition">betared</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#res"><span class="id" title="variable">res</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="definition">mkApps</span> (<span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> <span class="id" title="var">u</span>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="definition">mkApps</span> (<span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> <span class="id" title="var">u</span>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">mkApps</span> (<span class="id" title="constructor">tConst</span> <span class="id" title="var">kn</span> <span class="id" title="var">u</span>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">t</span> =&gt; <span class="id" title="definition">mkApps</span> (<a class="idref" href="ConCert.Extraction.Common.html#map_subterms"><span class="id" title="definition">map_subterms</span></a> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_aux"><span class="id" title="definition">inline_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#t"><span class="id" title="variable">t</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#args"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inline"><span class="id" title="definition">inline</span></a> : <span class="id" title="inductive">term</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">term</span> := <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_aux"><span class="id" title="definition">inline_aux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inline_in_constant_body"><span class="id" title="definition">inline_in_constant_body</span></a> <span class="id" title="var">cst</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="constructor">cst_type</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">inline</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">cst_type</span> <span class="id" title="constructor">cst</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">cst_universes</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">cst_universes</span> <span class="id" title="constructor">cst</span><span class="id" title="constructor">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">cst_body</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">option_map</span> <span class="id" title="constructor">inline</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">cst_body</span> <span class="id" title="constructor">cst</span><span class="id" title="constructor">)</span> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inline_oib"><span class="id" title="definition">inline_oib</span></a> (<span class="id" title="var">oib</span> : <span class="id" title="record">one_inductive_body</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="constructor">ind_name</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_name</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_type</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">inline</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_type</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_kelim</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_kelim</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_ctors</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">map</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">fun</span> <span class="id" title="constructor">'(</span><span class="id" title="constructor">c_nm</span><span class="id" title="constructor">,</span><span class="id" title="constructor">c_ty</span><span class="id" title="constructor">,</span><span class="id" title="constructor">i</span><span class="id" title="constructor">)</span> <span class="id" title="constructor">=&gt;</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">c_nm</span><span class="id" title="constructor">,</span> <span class="id" title="constructor">inline</span> <span class="id" title="constructor">c_ty</span><span class="id" title="constructor">,</span><span class="id" title="constructor">i</span><span class="id" title="constructor">))</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_ctors</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_projs</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">map</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">fun</span> <span class="id" title="constructor">'(</span><span class="id" title="constructor">p_nm</span><span class="id" title="constructor">,</span> <span class="id" title="constructor">p_ty</span><span class="id" title="constructor">)</span> <span class="id" title="constructor">=&gt;</span> <span class="id" title="constructor">(</span><span class="id" title="constructor">p_nm</span><span class="id" title="constructor">,</span> <span class="id" title="constructor">inline</span> <span class="id" title="constructor">p_ty</span><span class="id" title="constructor">))</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_projs</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_relevance</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">oib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_relevance</span><span class="id" title="constructor">)</span> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inline_context_decl"><span class="id" title="definition">inline_context_decl</span></a> (<span class="id" title="var">cd</span> : <span class="id" title="record">context_decl</span>) : <span class="id" title="record">context_decl</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="constructor">decl_name</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">cd</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">decl_name</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">decl_body</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">option_map</span> <span class="id" title="constructor">inline</span> <span class="id" title="constructor">cd</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">decl_body</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">decl_type</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">cd</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">decl_type</span><span class="id" title="constructor">)</span> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inline_in_decl"><span class="id" title="definition">inline_in_decl</span></a> <span class="id" title="var">d</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#d"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">ConstantDecl</span> <span class="id" title="var">cst</span> =&gt; <span class="id" title="constructor">ConstantDecl</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_in_constant_body"><span class="id" title="definition">inline_in_constant_body</span></a> <span class="id" title="var">cst</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">InductiveDecl</span> <span class="id" title="var">mib</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">InductiveDecl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="constructor">ind_finite</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">mib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_finite</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_npars</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">mib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_npars</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_params</span> <span class="id" title="constructor">:=</span><span class="id" title="constructor">map</span> <span class="id" title="constructor">inline_context_decl</span> <span class="id" title="constructor">mib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_params</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_bodies</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">map</span> <span class="id" title="constructor">inline_oib</span> <span class="id" title="constructor">mib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_bodies</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_universes</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">mib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_universes</span><span class="id" title="constructor">);</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">ind_variance</span> <span class="id" title="constructor">:=</span> <span class="id" title="constructor">mib</span><span class="id" title="constructor">.(</span><span class="id" title="constructor">ind_variance</span><span class="id" title="constructor">)</span> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inlining"><span class="id" title="section">inlining</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="inline_in_env"><span class="id" title="definition">inline_in_env</span></a> (<span class="id" title="var">should_inline</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<span class="id" title="var">Σ</span> : <span class="id" title="definition">global_env</span>) : <span class="id" title="definition">global_env</span>:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">newΣ</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">Σ</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_in_decl"><span class="id" title="definition">inline_in_decl</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#should_inline"><span class="id" title="variable">should_inline</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#decl"><span class="id" title="variable">decl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#should_inline"><span class="id" title="variable">should_inline</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>)) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#4ee2fce55d2f463a6bcf1170a801fca9"><span class="id" title="variable">newΣ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="inline_global_env_template"><span class="id" title="definition">inline_global_env_template</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">mpath</span> : <span class="id" title="inductive">modpath</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Σ</span> : <span class="id" title="definition">global_env</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">should_inline</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">seeds</span> : <span class="id" title="definition">KernameSet.t</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="inductive">TemplateMonad</span> <span class="id" title="definition">global_env</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">suffix</span> := "_after_inlining" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Σinlined</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="constructor">tmEval</span> <span class="id" title="constructor">lazy</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_in_env"><span class="id" title="definition">inline_in_env</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#should_inline"><span class="id" title="variable">should_inline</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>)<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.Certifying.html#gen_defs_and_proofs"><span class="id" title="definition">gen_defs_and_proofs</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#c64c0585317117742a4c787599beaba1"><span class="id" title="variable">Σinlined</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#mpath"><span class="id" title="variable">mpath</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#suffix"><span class="id" title="variable">suffix</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#seeds"><span class="id" title="variable">seeds</span></a><span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;<span class="id" title="method">ret</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#c64c0585317117742a4c787599beaba1"><span class="id" title="variable">Σinlined</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Mainly&nbsp;for&nbsp;testing&nbsp;purposes&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="inline_def"><span class="id" title="definition">inline_def</span></a> {<span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">should_inline</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">def</span> : <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="inductive">TemplateMonad</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">mpath</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="constructor">tmCurrentModPath</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="constructor">tmQuoteRecTransp</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#def"><span class="id" title="variable">def</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;<span class="id" title="var">kn</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="ConCert.Extraction.Common.html#extract_def_name"><span class="id" title="definition">Common.extract_def_name</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#def"><span class="id" title="variable">def</span></a> <span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_global_env_template"><span class="id" title="definition">inline_global_env_template</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#mpath"><span class="id" title="variable">mpath</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">.1</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#should_inline"><span class="id" title="variable">should_inline</span></a> (<span class="id" title="definition">KernameSet.singleton</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="template_inline"><span class="id" title="definition">template_inline</span></a> (<span class="id" title="var">should_inline</span> : <span class="id" title="definition">kername</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>): <a class="idref" href="ConCert.Extraction.Transform.html#TemplateTransform"><span class="id" title="definition">TemplateTransform</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">Σ</span> =&gt; <a class="idref" href="ConCert.Extraction.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> (<a class="idref" href="ConCert.Extraction.Utils.html#timed"><span class="id" title="definition">timed</span></a> "Inlining" (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_in_env"><span class="id" title="definition">inline_in_env</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#should_inline"><span class="id" title="variable">should_inline</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Tests"><span class="id" title="module">Tests</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Inlining&nbsp;into&nbsp;the&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="Tests.Ex1"><span class="id" title="module">Ex1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex1.foo"><span class="id" title="definition">foo</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex1.bar"><span class="id" title="definition">bar</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1.foo"><span class="id" title="definition">foo</span></a> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex1.baz"><span class="id" title="definition">baz</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1.foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1.bar"><span class="id" title="definition">bar</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<span class="id" title="var">env</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_def"><span class="id" title="definition">inline_def</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1.foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a>  <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1.bar"><span class="id" title="definition">bar</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1.baz"><span class="id" title="definition">baz</span></a> <span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="constructor">tmEval</span> <span class="id" title="constructor">lazy</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Program.Basics.html#compose"><span class="id" title="definition">Basics.compose</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#env"><span class="id" title="variable">env</span></a>)<span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">tmPrint</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#t"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex1"><span class="id" title="module">Ex1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Inlining&nbsp;into&nbsp;the&nbsp;definition&nbsp;from&nbsp;the&nbsp;standard&nbsp;library&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="Tests.Ex2"><span class="id" title="module">Ex2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_def"><span class="id" title="definition">inline_def</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Nat.html#add"><span class="id" title="definition">Nat.add</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a> ) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex2"><span class="id" title="module">Ex2</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Inlining&nbsp;a&nbsp;function&nbsp;of&nbsp;several&nbsp;arguments&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="Tests.Ex3"><span class="id" title="module">Ex3</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex3.foo"><span class="id" title="definition">foo</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#z"><span class="id" title="variable">z</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex3.bar"><span class="id" title="definition">bar</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex3.foo"><span class="id" title="definition">foo</span></a> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) 1 <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#n"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex3.baz"><span class="id" title="definition">baz</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex3.bar"><span class="id" title="definition">bar</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#z"><span class="id" title="variable">z</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_def"><span class="id" title="definition">inline_def</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex3.foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex3.bar"><span class="id" title="definition">bar</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex3.baz"><span class="id" title="definition">baz</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex3"><span class="id" title="module">Ex3</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Records&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="Tests.Ex4"><span class="id" title="module">Ex4</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Set</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projections</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="Tests.Ex4.blah"><span class="id" title="record">blah</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="Tests.Ex4.field1"><span class="id" title="projection">field1</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="Tests.Ex4.field2"><span class="id" title="projection">field2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> }.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex4.set_field1"><span class="id" title="definition">set_field1</span></a> (<span class="id" title="var">b</span> : <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.blah"><span class="id" title="record">blah</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">field1</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">n</span></a><a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">field2</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">:=</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">b</span></a><a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">.(</span></a><a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">field2</span></a><a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.Build_blah"><span class="id" title="constructor">)</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex4.bar"><span class="id" title="definition">bar</span></a> (<span class="id" title="var">b</span> : <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.blah"><span class="id" title="record">blah</span></a> ):= <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.set_field1"><span class="id" title="definition">set_field1</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#b"><span class="id" title="variable">b</span></a> 0.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_def"><span class="id" title="definition">inline_def</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.set_field1"><span class="id" title="definition">set_field1</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4.bar"><span class="id" title="definition">bar</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex4"><span class="id" title="module">Ex4</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Casts&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="Tests.Ex5"><span class="id" title="module">Ex5</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex5.foo"><span class="id" title="definition">foo</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#y"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex5.bar"><span class="id" title="definition">bar</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ((<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex5.foo"><span class="id" title="definition">foo</span></a> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> 2)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#x"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_def"><span class="id" title="definition">inline_def</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex5.foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex5.bar"><span class="id" title="definition">bar</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex5"><span class="id" title="module">Ex5</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Inlining&nbsp;type&nbsp;aliases&nbsp;in&nbsp;inductives&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="Tests.Ex6"><span class="id" title="module">Ex6</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex6.my_prod"><span class="id" title="definition">my_prod</span></a> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#B"><span class="id" title="variable">B</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="Tests.Ex6.blah"><span class="id" title="inductive">blah</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="Tests.Ex6.blah_ctor"><span class="id" title="constructor">blah_ctor</span></a> : <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6.my_prod"><span class="id" title="definition">my_prod</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#blah"><span class="id" title="inductive">blah</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Tests.Ex6.foo"><span class="id" title="definition">foo</span></a> (<span class="id" title="var">p</span> : <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6.my_prod"><span class="id" title="definition">my_prod</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6.blah"><span class="id" title="inductive">blah</span></a> := <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6.blah_ctor"><span class="id" title="constructor">blah_ctor</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#p"><span class="id" title="variable">p</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">MetaCoq</span> <span class="id" title="var">Run</span> (<a class="idref" href="ConCert.Extraction.CertifyingInlining.html#inline_def"><span class="id" title="definition">inline_def</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kn</span> =&gt; <span class="id" title="definition">eq_kername</span> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">&lt;%%</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6.my_prod"><span class="id" title="definition">my_prod</span></a> <a class="idref" href="ConCert.Extraction.Common.html#f91ac6598892630a2bddbf8938e1b2db"><span class="id" title="notation">%%&gt;</span></a> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#kn"><span class="id" title="variable">kn</span></a>) <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6.foo"><span class="id" title="definition">foo</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests.Ex6"><span class="id" title="module">Ex6</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Extraction.CertifyingInlining.html#Tests"><span class="id" title="module">Tests</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="https://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
